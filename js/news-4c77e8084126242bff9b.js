(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["news"],{1263:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-news-search"},[s("search-bar",{model:{value:t.keywordOrigin,callback:function(e){t.keywordOrigin=e},expression:"keywordOrigin"}}),s("jo-load-more",{ref:"loadmore",attrs:{"auto-load":!1,"show-bottom":t.list.length>0},on:{onLoadMore:t.onLoadMore}},t._l(t.list,function(e){return e.id?s("news-card",{key:e.id,attrs:{news:e}}):t._e()})),s("p",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"load-more-ph m-text-c mt10"},[t._v("Ê≠£Âú®ÊêúÁ¥¢...")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.noResult&&!t.loading&&t.keyword&&!t.list.length,expression:"noResult && !loading && keyword && !list.length"}],staticClass:"placeholder m-no-find"})],1)},i=[],a=s("8afe"),r=s("2ef0"),o=s.n(r),c=s("3d8d"),l=s("6736"),u=s("aa2a"),h=s("365c"),d={name:"NewsSearch",components:{NewsCard:l["a"],SearchBar:c["a"]},data:function(){return{keywordOrigin:"",list:[],loading:!1,noResult:!1}},computed:{after:function(){var t=this.list.length;return t>0?this.list[t-1].id:0},keyword:function(){return this.keywordOrigin.trim()}},watch:{keyword:function(){this.searchNewsByKey()}},methods:{searchNewsByKey:o.a.debounce(function(){var t=this;this.keyword&&(this.loading=!0,Object(u["o"])(this.keyword).then(function(e){var s=e.data;t.loading=!1,t.list=s,t.$refs.loadmore.afterRefresh(s.length<h["b"]),s.length||(t.noResult=!0)}))},600),onLoadMore:function(){var t=this;Object(u["o"])(this.keyword,h["b"],this.after).then(function(e){var s=e.data;t.list=Object(a["a"])(t.list).concat(Object(a["a"])(s)),t.$refs.loadmore.afterLoadmore(s.length<h["b"])})}}},m=d,f=(s("9a80"),s("8dc7"),s("2877")),w=Object(f["a"])(m,n,i,!1,null,"701ebe3a",null);w.options.__file="NewsSearch.vue";e["default"]=w.exports},"20d6":function(t,e,s){"use strict";var n=s("5ca1"),i=s("0a49")(6),a="findIndex",r=!0;a in[]&&Array(1)[a](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(a)},3884:function(t,e,s){"use strict";var n=s("616f"),i=s.n(n);i.a},"443b":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-news"},[s("common-header",{staticClass:"common-header"},[t._v("\n    ËµÑËÆØ\n    "),s("template",{slot:"right"},[s("svg",{staticClass:"m-style-svg m-svg-def",on:{click:function(e){t.$router.push({path:"/news/search"})}}},[s("use",{attrs:{"xlink:href":"#icon-search"}})]),s("svg",{staticClass:"m-style-svg m-svg-def",on:{click:t.beforeCreatePost}},[s("use",{attrs:{"xlink:href":"#icon-news-draft"}})])])],2),t.isLogin?s("news-filter",{on:{change:t.onCateChange}}):t._e(),s("jo-load-more",{ref:"loadmore",staticClass:"loadmore",class:{guest:!t.isLogin},on:{onRefresh:t.onRefresh,onLoadMore:t.onLoadMore}},[s("banner-ad",{attrs:{type:"news"}}),t._l(t.list,function(e){return[e.author?s("news-card",{key:"news"+e.id,attrs:{"current-cate":t.currentCate,news:e}}):t._e(),e.space_id?s("ad-card",{key:"ad"+e.id,attrs:{ad:e}}):t._e()]})],2)],1)},i=[],a=s("8afe"),r=(s("f751"),s("96cf"),s("3040")),o=(s("ac6a"),s("456d"),s("c93e")),c=s("2ef0"),l=s.n(c),u=s("2f62"),h=s("6736"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"news-card",attrs:{href:t.ad.data.link}},[s("section",{staticClass:"body"},[s("h2",[t._v(t._s(t.ad.data.title))]),s("p",[s("i",{staticClass:"news-cate"},[t._v("ÂπøÂëä")]),s("span",[t._v(t._s(t._f("formatDate")(t.ad.data.time,"MM-dd")))])])]),t.ad.data.image?s("div",{staticClass:"poster"},[s("img",{attrs:{src:t.ad.data.image}})]):t._e()])},m=[],f={name:"AdCard",extends:h["a"],props:{ad:{type:Object,required:!0}},methods:{formatData:function(){}}},w=f,v=s("2877"),p=Object(v["a"])(w,d,m,!1,null,null,null);p.options.__file="AdCard.vue";var g=p.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:[t.prefixCls,{showAll:t.showAll}]},[s("div",{class:t.prefixCls+"--head"},[s("span",[t._v("ÁÇπÂáª‰ª•ÁºñËæë")]),s("div",[s("button",{on:{click:t.onOk}},[t._v(t._s(t.editing?"ÂÆåÊàê":"ÁºñËæë"))]),s("button",{on:{click:t.showEditor}},[t._v("Êî∂Ëµ∑")])])]),s("div",{class:t.prefixCls+"--list__wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAll,expression:"!showAll"}],class:t.prefixCls+"--switch",on:{click:t.showEditor}},[s("svg",[s("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])]),s("span",{class:t.prefixCls+"--list__label"},[t._v("ÊàëÁöÑËÆ¢ÈòÖ")]),s("div",{class:[t.prefixCls+"--list",{editing:t.editing}]},[s("div",{class:[t.prefixCls+"--list__item",{active:0===~~t.currentCate.id}],on:{click:function(e){t.chooseCate(e,{id:0,name:"Êé®Ëçê"})}}},[t._v("Êé®Ëçê")]),t._l(t.myCates,function(e){return s("div",{key:"myCate-"+e.id,class:[t.prefixCls+"--list__item",{active:e.id===t.currentCate.id}],on:{click:function(s){t.chooseCate(s,e)}}},[t._v(t._s(e.name))])})],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAll,expression:"showAll"}],class:t.prefixCls+"--list__wrap"},[s("span",{class:t.prefixCls+"--list__label"},[t._v("Êõ¥Â§öËÆ¢ÈòÖ")]),s("div",{class:t.prefixCls+"--list"},t._l(t.moreCates,function(e){return s("div",{key:"moreCate-"+e.id,class:[t.prefixCls+"--list__item"],on:{click:function(s){t.chooseCate(s,e)}}},[t._v(t._s(e.name))])}))])])},_=[],b=(s("20d6"),"news__filter"),k={name:"NewsFilter",data:function(){return{prefixCls:b,editing:!1,showAll:!1,myCates:[],moreCates:[],currentCate:{id:0,name:"Êé®Ëçê"}}},watch:{editing:function(){},showAll:function(t){!t&&(this.editing=!1)}},mounted:function(){this.fetchCates()},methods:{showEditor:function(){this.showAll=!this.showAll},onOk:function(){if(this.editing){this.editing=!1;var t=this.myCates.map(function(t){return t.id}).join(",");this.$http.patch("/news/categories/follows",{follows:t}),this.showAll=!1,this.$emit("onOk",this.myCates)}else this.editing=!0},chooseCate:function(t,e){if(this.showAll)if(this.editing){var s=this.myCates.findIndex(function(t){return t.id===e.id});if(s>-1)this.moreCates.push(e),this.myCates.splice(s,1);else{var n=this.moreCates.findIndex(function(t){return t.id===e.id});this.myCates.push(e),this.moreCates.splice(n,1)}}else this.editing=!0;else if(e.id!==this.currentCate.id){var i=t.target;this.currentCate=Object(o["a"])({},e,{el:i}),this.$emit("change",this.currentCate)}},fetchCates:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/news/cates");case 2:e=t.sent,s=e.data,s=void 0===s?{}:s,n=s.my_cates,i=s.more_cates,this.myCates=n?Object(a["a"])(n):[],this.moreCates=i?Object(a["a"])(i):[];case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},y=k,x=(s("8ee9"),Object(v["a"])(y,C,_,!1,null,"69daf673",null));x.options.__file="NewsFilter.vue";var $=x.exports,I=s("2a81"),R={name:"NewsList",components:{NewsCard:h["a"],AdCard:g,NewsFilter:$,BannerAd:I["a"]},data:function(){return{list:[],currentCate:0,newsList:[]}},computed:Object(o["a"])({},Object(u["d"])({advertiseList:function(t){return t.news.advertise.list},advertiseIndex:function(t){return t.news.advertise.index},newsVerified:function(t){return t.CONFIG["news:contribute"].verified},userVerify:function(t){return t.USER_VERIFY||{}}}),{after:function(){var t=this.newsList.length;return t>0?this.newsList[t-1].id:0},isLogin:function(){var t=this.$store.state.CURRENTUSER;return Object.keys(t).length}}),mounted:function(){this.$store.dispatch("news/getAdvertise"),this.newsList.length||this.$refs.loadmore.beforeRefresh(),this.newsVerified&&this.$store.dispatch("FETCH_USER_VERIFY")},methods:{onCateChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,s=void 0===e?0:e;this.newsList=[],this.currentCate=s,this.$refs.loadmore.beforeRefresh()},onRefresh:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("news/RESET_ADVERTISE"),s=0===this.currentCate?{recommend:1}:{cate_id:this.currentCate},t.next=4,this.$store.dispatch("news/getNewsList",s);case 4:n=t.sent,this.newsList=n,e(n.length<10),this.advertiseIndex<this.advertiseList.length&&(i=1+~~(9*Math.random()),i>n.length&&(i=n.length),n.splice(i,0,this.advertiseList[this.advertiseIndex]),this.$store.commit("news/POPUP_ADVERTISE")),this.list=n;case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onLoadMore:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var s,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=0===this.currentCate?{recommend:1}:{cate_id:this.currentCate},Object.assign(s,{after:this.after}),t.next=4,this.$store.dispatch("news/getNewsList",s);case 4:n=t.sent,e(n.length<10),this.advertiseIndex<this.advertiseList.length&&(i=1+~~(9*Math.random()),i>n.length&&(i=n.length),n.splice(i,0,this.advertiseList[this.advertiseIndex]),this.$store.commit("news/POPUP_ADVERTISE")),this.list=Object(a["a"])(this.list).concat(Object(a["a"])(n));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),beforeCreatePost:function(){var t=this,e=!this.$store.state.CONFIG["news:contribute"].verified||!l.a.isEmpty(this.$store.state.CURRENTUSER.verified);if(e)return this.$router.push({path:"/post/release"});if(0===this.userVerify.status)this.$Message.error("ÊÇ®ÁöÑËÆ§ËØÅÊ≠£Âú®Á≠âÂæÖÂÆ°Ê†∏ÔºåÈÄöËøáÂÆ°Ê†∏ÂêéÂèØÂèëÂ∏ÉÂ∏ñÂ≠ê");else{var s=[{text:"‰∏™‰∫∫ËÆ§ËØÅ",method:function(){return t.$router.push({path:"/profile/certificate",query:{type:"user"}})}},{text:"‰ºÅ‰∏öËÆ§ËØÅ",method:function(){return t.$router.push({path:"/profile/certificate",query:{type:"org"}})}}];this.$bus.$emit("actionSheet",s,"ÂèñÊ∂à","ËÆ§ËØÅÁî®Êà∑ÊâçËÉΩÂàõÂª∫ÊäïÁ®øÔºåÂéªËÆ§ËØÅÔºü")}}}},N=R,O=(s("3884"),Object(v["a"])(N,n,i,!1,null,"1f072530",null));O.options.__file="NewsList.vue";e["default"]=O.exports},"616f":function(t,e,s){},"6bb5":function(t,e,s){},"8b19":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article-card",{attrs:{liked:t.liked,loading:t.loading,"can-oprate":0===t.news.audit_status},on:{"on-like":t.likeNews,"on-share":t.shareNews,"on-more":t.moreAction,"on-comment":t.commentNews}},[s("common-header",{attrs:{slot:"head"},slot:"head"},[t._v("ËµÑËÆØËØ¶ÊÉÖ")]),s("jo-load-more",{ref:"loadmore",attrs:{"auto-load":!1,"show-bottom":!1},on:{onRefresh:t.onRefresh}},[s("div",{staticClass:"m-flex-shrink1 m-flex-grow1 m-art m-main"},[s("section",{staticClass:"m-art-head"},[s("h1",[t._v(t._s(t.news.title))]),s("p",[s("i",{staticClass:"m-art-cate"},[t._v(t._s(t.cate))]),s("span",[t._v("Êù•Ëá™ "+t._s(t.news.from||"ÂéüÂàõ"))])])]),t.news.subject?s("p",{staticClass:"m-art-subject"},[t._v(t._s(t.news.subject))]):t._e(),s("div",{staticClass:"m-art-body markdown-body",domProps:{innerHTML:t._s(t.body)}}),s("div",{staticClass:"m-box m-aln-center m-justify-bet m-art-foot"},[s("div",{staticClass:"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list"},[t.likeCount>0&&0===t.news.audit_status?[s("ul",{staticClass:"m-box m-flex-grow0 m-flex-shrink0"},t._l(t.likes.slice(0,5),function(e,n){var i=e.user,a=e.id;return s("li",{key:a,staticClass:"m-avatar-box tiny",style:{zIndex:5-n}},[s("img",{attrs:{src:t.getAvatar(i.avatar)}})])})),s("span",[t._v(t._s(t._f("formatNum")(t.likeCount))+"‰∫∫ÁÇπËµû")])]:t._e()],2),s("div",{staticClass:"m-box-model m-aln-end m-art-info"},[s("span",[t._v("ÂèëÂ∏É‰∫é"+t._s(t._f("time2tips")(t.time)))]),s("span",[t._v(t._s(t._f("formatNum")(t.news.hits||0))+"ÊµèËßà")])])]),s("div",{staticClass:"m-box-model m-box-center m-box-center-a m-art-reward"},[s("button",{staticClass:"m-art-rew-btn",on:{click:t.rewardNews}},[t._v("Êâì Ëµè")]),s("p",{staticClass:"m-art-rew-label"},[s("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t._f("formatNum")(t.reward.count)))]),t._v("‰∫∫ÊâìËµèÔºåÂÖ±\n          "),s("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t._f("formatNum")(~~t.reward.amount)))]),t._v(t._s(t.currencyUnit)+"\n        ")]),s("router-link",{staticClass:"m-box m-aln-center m-art-rew-list",attrs:{tag:"ul",to:"rewarders",append:""}},[t._l(t.rewardList,function(e){return s("li",{key:e.id,staticClass:"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny",class:"m-avatar-box-"+e.user.sex},[s("img",{attrs:{src:t.getAvatar(e.user.avatar)}})])}),t.rewardList.length>0?s("li",{staticClass:"m-box m-aln-center"},[s("svg",{staticClass:"m-style-svg m-svg-def",staticStyle:{fill:"#bfbfbf"}},[s("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])]):t._e()],2)],1)]),s("detail-ad",{attrs:{type:"news"}}),s("div",{staticClass:"m-box-model m-art-comments"},[s("ul",{staticClass:"m-box m-aln-center m-art-comments-tabs"},[s("li",[t._v(t._s(t._f("formatNum")(t.commentCount))+"Êù°ËØÑËÆ∫")])]),0===t.news.audit_status?[t._l(t.pinnedCom,function(e){return s("comment-item",{key:"pinned-"+e.id,attrs:{comment:e,pinned:!0},on:{click:t.replyComment}})}),t._l(t.comments,function(e){return s("comment-item",{key:"comment-"+e.id,attrs:{comment:e},on:{click:t.replyComment}})}),s("div",{staticClass:"m-box m-aln-center m-justify-center load-more-box"},[t.noMoreCom?s("span",{staticClass:"load-more-ph"},[t._v("---Ê≤°ÊúâÊõ¥Â§ö---")]):s("span",{staticClass:"load-more-btn",on:{click:function(e){e.stopPropagation(),t.fetchNewsComments(t.maxComId)}}},[t._v("\n            "+t._s(t.fetchComing?"Âä†ËΩΩ‰∏≠...":"ÁÇπÂáªÂä†ËΩΩÊõ¥Â§ö")+"\n          ")])])]:t._e()],2)],1)],1)},i=[],a=s("8afe"),r=(s("7f7f"),s("ac6a"),s("456d"),s("c93e")),o=s("2f62"),c=s("607e"),l=s("ae61"),u=s("9e56"),h=s("1238"),d=s("1038"),m=s("365c"),f=s("aa2a"),w=s("4260"),v={name:"NewsDetail",components:{ArticleCard:c["a"],CommentItem:l["a"],DetailAd:u["a"]},data:function(){return{oldID:0,news:{},loading:!0,fetching:!1,likes:[],comments:[],rewardList:[],reward:{count:0,amount:0},pinnedCom:[],fetchComing:!1,noMoreCom:!1,maxComId:0,config:{appid:"",signature:"",timestamp:"",noncestr:""},appList:["onMenuShareQZone","onMenuShareQQ","onMenuShareAppMessage","onMenuShareTimeline"],share:{title:"",desc:"",link:""}}},computed:Object(r["a"])({},Object(o["d"])(["CURRENTUSER"]),{firstImage:function(){var t=this.news.image;return Object.keys(t).length?this.$http.defaults.baseURL+"/files/"+t.id+"?w=300&h=300":""},newsID:function(){return this.$route.params.newsID},userID:function(){return this.news.user_id||0},isMine:function(){return this.news.user_id===this.CURRENTUSER.id},liked:{get:function(){return!!this.news.has_like},set:function(t){this.news.has_like=t}},likeCount:{get:function(){return this.news.digg_count||0},set:function(t){t&&(this.news.digg_count=t)}},commentCount:{get:function(){return this.news.comment_count||0},set:function(t){this.news.comment_count=t}},time:function(){return this.news.created_at||""},cate:function(){var t=this.news.category;t=void 0===t?{}:t;var e=t.name,s=void 0===e?"Êú™ÂàÜÁ±ª":e;return s},body:function(){return Object(d["default"])(this.news.content||"")},isWechat:function(){return this.$store.state.BROWSER.isWechat},has_collect:{get:function(){return this.news.has_collect},set:function(t){this.news.has_collect=t}}}),activated:function(){var t=this;this.newsID&&(this.newsID!==this.oldID?this.fetchNews():setTimeout(function(){t.loading=!1},600))},deactivated:function(){this.loading=!0},methods:{shareSuccess:function(){this.$Message.success("ÂàÜ‰∫´ÊàêÂäü")},shareCancel:function(){this.$Message.success("ÂèñÊ∂àÂàÜ‰∫´")},fetchNews:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w["d"];this.fetching||(this.fetching=!0,f["g"](this.newsID).then(function(s){var n=s.data,i=void 0===n?{}:n;if(t.loading=!1,t.fetching=!1,t.news=i,t.oldID=t.newsID,t.share.title=i.title,t.share.desc=i.subject,t.fetchNewsComments(),t.fetchNewsLikes(),t.fetchRewardInfo(),t.fetchRewards(),e(),t.isWechat){var a=window.location.origin+"/hanfu360/".substr(0,"/hanfu360/".length-1)+t.$route.fullPath,r="IOS"===t.$store.state.BROWSER.OS?window.initUrl:a;Object(h["a"])(r,{title:i.title,desc:i.subject,link:a,imgUrl:t.firstImage})}}).catch(function(){t.$router.back()}))},fetchNewsLikes:function(){var t=this;this.$http.get("/news/".concat(this.newsID,"/likes")).then(function(e){var s=e.data,n=void 0===s?[]:s;n&&n.length,t.likes=n})},fetchNewsComments:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.fetchComing||(this.fetchComing=!0,f["i"](this.newsID,{after:e}).then(function(s){var n=s.data,i=n.pinneds,r=void 0===i?[]:i,o=n.comments,c=void 0===o?[]:o;if(e)t.comments=Object(a["a"])(t.comments).concat(Object(a["a"])(c));else{t.pinnedCom=r;var l=r.map(function(t){return t.id});t.comments=c.filter(function(t){return l.indexOf(t.id)<0})}c.length&&(t.maxComId=c[c.length-1].id),t.noMoreCom=c.lenght!==m["b"],t.fetchComing=!1}).catch(function(){t.fetchComing=!1}))},fetchRewards:function(){var t=this;f["k"](this.newsID,{limit:10}).then(function(e){var s=e.data,n=void 0===s?{}:s;t.rewardList=n})},fetchRewardInfo:function(){var t=this;f["l"](this.newsID).then(function(e){var s=e.data,n=void 0===s?{}:s;t.reward={count:~~n.count||0,amount:~~n.amount||0}})},rewardNews:function(){var t=this,e=function(e){t.fetchRewards(),t.reward.count+=1,t.reward.amount+=e};this.$bus.$emit("reward",{type:"news",api:f["n"],payload:this.newsID,callback:e})},likeNews:function(){var t=this,e=this.liked?"delete":"post";this.fetching||(this.fetching=!0,this.$http({method:e,url:"/news/".concat(this.newsID,"/likes"),validateStatus:function(t){return 201===t||204===t}}).then(function(){"post"===e?(t.liked=!0,t.likeCount+=1):(t.liked=!1,t.likeCount-=1),t.fetching=!1}).catch(function(){t.fetching=!1}))},commentNews:function(){var t=this;this.$bus.$emit("commentInput",{onOk:function(e){t.sendComment({body:e})}})},shareNews:function(){this.isWechat?this.$Message.success("ËØ∑ÁÇπÂáªÂè≥‰∏äËßíÂæÆ‰ø°ÂàÜ‰∫´üò≥"):this.$Message.success("ËØ∑‰ΩøÁî®ÊµèËßàÂô®ÁöÑÂàÜ‰∫´ÂäüËÉΩüò≥")},moreAction:function(){var t=this,e=[];this.has_collect?e.push({text:"ÂèñÊ∂àÊî∂Ëóè",method:function(){f["p"](t.newsID).then(function(){t.$Message.success("ÂèñÊ∂àÊàêÂäü"),t.has_collect=!1})}}):e.push({text:"Êî∂Ëóè",method:function(){f["c"](t.newsID).then(function(){t.$Message.success("Êî∂ËóèÊàêÂäü"),t.has_collect=!0})}});var s=this.isMine?[{text:"Áî≥ËØ∑ÊñáÁ´†ÁΩÆÈ°∂",method:function(){t.$bus.$emit("applyTop",{type:"news",api:f["a"],payload:t.newsID})}},{text:"Âà†Èô§",method:function(){t.$Message.info("ËµÑËÆØÂà†Èô§ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}}]:[{text:"‰∏æÊä•",method:function(){t.$Message.info("‰∏æÊä•ÂäüËÉΩÂºÄÂèë‰∏≠ÔºåÊï¨ËØ∑ÊúüÂæÖ")}}];this.$bus.$emit("actionSheet",e.concat(s),"ÂèñÊ∂à")},replyComment:function(t,e,s){var n=this;if(t===this.CURRENTUSER.id){var i=t===this.userID,a=[{text:i?"ËØÑËÆ∫ÁΩÆÈ°∂":"Áî≥ËØ∑ËØÑËÆ∫ÁΩÆÈ°∂",method:function(){n.$bus.$emit("applyTop",{isOwner:i,type:"newsComment",api:f["b"],payload:{newsId:n.newsID,commentId:s},callback:n.fetchNewsComments})}},{text:"Âà†Èô§ËØÑËÆ∫",method:function(){return n.deleteComment(s)}}];this.$bus.$emit("actionSheet",a,"ÂèñÊ∂à")}else this.$bus.$emit("commentInput",{placeholder:"ÂõûÂ§çÔºö ".concat(e),onOk:function(e){n.sendComment({reply_user:t,body:e})}})},sendComment:function(t){var e=this,s=t.reply_user,n=t.body,i={};n&&n.length>0?(i.body=n,s&&(i["reply_user"]=s),this.$http.post("/news/".concat(this.newsID,"/comments"),i,{validateStatus:function(t){return 201===t}}).then(function(){e.$Message.success("ËØÑËÆ∫ÊàêÂäü"),e.fetchNewsComments(),e.commentCount+=1,e.$bus.$emit("commentInput:close",!0)}).catch(function(){e.$Message.error("ËØÑËÆ∫Â§±Ë¥•"),e.$bus.$emit("commentInput:close",!0)})):this.$Message.error("ËØÑËÆ∫ÂÜÖÂÆπ‰∏çËÉΩ‰∏∫Á©∫")},deleteComment:function(t){var e=this;f["d"](this.newsID,t).then(function(){e.fetchNewsComments(),e.commentCount-=1,e.$Message.success("Âà†Èô§ËØÑËÆ∫ÊàêÂäü")})},onRefresh:function(){var t=this;this.fetchNews(function(){t.$refs.loadmore.afterRefresh(!0)})},getAvatar:function(t){return t=t||{},t.url||null}}},p=v,g=(s("96c0"),s("2877")),C=Object(g["a"])(p,n,i,!1,null,"693cc383",null);C.options.__file="NewsDetail.vue";e["default"]=C.exports},"8dc7":function(t,e,s){"use strict";var n=s("f917"),i=s.n(n);i.a},"8ee9":function(t,e,s){"use strict";var n=s("aee5"),i=s.n(n);i.a},"96c0":function(t,e,s){"use strict";var n=s("c50d"),i=s.n(n);i.a},"9a80":function(t,e,s){"use strict";var n=s("6bb5"),i=s.n(n);i.a},aee5:function(t,e,s){},c50d:function(t,e,s){},f917:function(t,e,s){}}]);
//# sourceMappingURL=news-4c77e8084126242bff9b.js.map
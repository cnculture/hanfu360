{"version":3,"sources":["webpack:///./src/page/feed/FeedDetail.vue?2a16","webpack:///./src/page/feed/FeedDetail.vue?2141","webpack:///src/page/feed/FeedDetail.vue","webpack:///./src/page/feed/FeedDetail.vue?5181","webpack:///./src/page/feed/FeedDetail.vue","webpack:///./src/page/feed/FeedList.vue?7cc3","webpack:///./src/page/feed/components/FeedAdCard.vue?f7b4","webpack:///src/page/feed/components/FeedAdCard.vue","webpack:///./src/page/feed/components/FeedAdCard.vue?d97a","webpack:///./src/page/feed/components/FeedAdCard.vue","webpack:///src/page/feed/FeedList.vue","webpack:///./src/page/feed/FeedList.vue?dd97","webpack:///./src/page/feed/FeedList.vue","webpack:///./src/page/feed/components/FeedAdCard.vue?054e","webpack:///./src/page/feed/FeedList.vue?a29a"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FeedDetail_vue_vue_type_style_index_0_id_500756aa_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FeedDetail_vue_vue_type_style_index_0_id_500756aa_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","liked","loading","on","on-like","likeFeed","on-share","shareFeed","on-more","moreAction","on-comment","commentFeed","slot","user","size","staticClass","_v","_s","name","isMine","_e","class","c_59b6d7","relation","status","click","$event","followUserByStatus","xlink:href","icon","ref","on-refresh","onRefresh","title","video","poster","cover_file","controls","autoplay","src","video_file","type","_l","img","key","file","scopedSlots","_u","fn","props","onFileClick","domProps","innerHTML","formatBody","feedContent","likeCount","tag","to","append","likes","slice","index","id","style","zIndex","getAvatar","avatar","_f","time","feed","feed_view_count","rewardFeed","href","reward","count","amount","currencyUnit","rew","rewardList","length","staticStyle","fill","commentCount","comment","pinned","replyComment","stopPropagation","fetchFeedComments","maxComId","fetchComing","staticRenderFns","FeedDetailvue_type_script_lang_js_","components","ArticleCard","CommentItem","ArticleComment","DetailAd","data","fetching","comments","pinnedCom","noMoreCom","computed","Object","objectSpread","vuex_esm","feedID","$route","params","concat","$http","defaults","baseURL","video_id","user_id","CURRENTUSER","get","set","val","has_like","like_count","feed_comment_count","images","created_at","feed_content","isWechat","$store","state","BROWSER","has_collect","relations","unFollow","text","follow","eachFollow","_this$user","follower","following","activated","fetchFeed","deactivated","share","desc","link","config","appid","timestamp","noncestr","signature","methods","str","scriptRegex","replace","reg","callback","_this","shareUrl","window","location","origin","substr","fullPath","signUrl","OS","initUrl","then","_ref","_ref$data","fetchUserInfo","fetchRewards","wechatShare","imgUrl","catch","goBack","_this2","assign","_this3","after","arguments","undefined","feeds","_ref2","_ref2$data","_ref2$data$pinneds","pinneds","_ref2$data$comments","toConsumableArray","pinnedIds","map","p","filter","c","indexOf","api","$nextTick","_this4","limit","_ref3","_ref3$data","url","_this5","reward_number","reward_amount","$bus","$emit","payload","_this6","method","validateStatus","s","Date","getTime","like","_this7","onOk","sendComment","body","$Message","success","_this8","defaultActions","txt","actions","setTimeout","actionSheet","color","info","uid","uname","commentId","_this9","isOwner","feedId","deleteComment","placeholder","reply_user","_ref4","_this10","replyUser","post","_ref5","_ref5$data","unshift","error","_this11","_this12","fetchFollow","_this13","$refs","loadmore","topEnd","paid_node","_this14","paid","$lstore","hasData","nodeType","node","onSuccess","path","$router","push","query","redirect","feed_FeedDetailvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","active-class","exact","auto-load","onLoadMore","feedType","card","ad","FeedAdCardvue_type_template_id_a7faf6c8_scoped_true_render","content","image","_m","FeedAdCardvue_type_template_id_a7faf6c8_scoped_true_staticRenderFns","FeedAdCardvue_type_script_lang_js_","required","filters","components_FeedAdCardvue_type_script_lang_js_","FeedAdCard","feedTypesMap","FeedListvue_type_script_lang_js_","FeedCard","BannerAd","getters","len","hot","watch","oldVal","includes","beforeRefresh","created","dispatch","util","_onRefresh","asyncToGenerator","regeneratorRuntime","mark","_callee","action","wrap","_context","prev","next","toUpperCase","refresh","sent","stop","_x","apply","_onLoadMore","_callee2","_context2","_x2","feed_FeedListvue_type_script_lang_js_","FeedList_component","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FeedAdCard_vue_vue_type_style_index_0_id_a7faf6c8_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FeedAdCard_vue_vue_type_style_index_0_id_a7faf6c8_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FeedList_vue_vue_type_style_index_0_id_75b44dea_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_FeedList_vue_vue_type_style_index_0_id_75b44dea_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"wGAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA6jBE,EAAG,4CCAhkB,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,gBAA0BE,OAAOC,MAAAP,EAAAO,MAAAC,QAAAR,EAAAQ,SAAwCC,IAAKC,UAAAV,EAAAW,SAAAC,WAAAZ,EAAAa,UAAAC,UAAAd,EAAAe,WAAAC,aAAAhB,EAAAiB,eAAuGb,EAAA,iBAAsBE,OAAOY,KAAA,QAAcA,KAAA,SAAad,EAAA,UAAeE,OAAOa,KAAAnB,EAAAmB,KAAAC,KAAA,UAA+BhB,EAAA,QAAaiB,YAAA,oCAA8CrB,EAAAsB,GAAA,WAAAtB,EAAAuB,GAAAvB,EAAAmB,KAAAK,MAAA,YAAAxB,EAAAyB,OAAqUzB,EAAA0B,KAArUtB,EAAA,YAAmFuB,OAAOC,SAAA,aAAA5B,EAAA6B,SAAAC,QAA+CZ,KAAA,UAAcd,EAAA,OAAYiB,YAAA,wBAAAZ,IAAwCsB,MAAA,SAAAC,GAAyBhC,EAAAiC,mBAAAjC,EAAA6B,SAAAC,YAA8C1B,EAAA,OAAYE,OAAO4B,aAAAlC,EAAA6B,SAAAM,aAAgC,GAAA/B,EAAA,aAAmCgC,IAAA,WAAA9B,OAAsB+B,aAAArC,EAAAsC,aAA4BlC,EAAA,QAAaiB,YAAA,6CAAuDjB,EAAA,OAAYiB,YAAA,eAAyBrB,EAAA,MAAAI,EAAA,MAAAJ,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAuC,UAAAvC,EAAA0B,KAAA1B,EAAAwC,MAAApC,EAAA,SAAsFiB,YAAA,oBAAAf,OAAuCmC,OAAAzC,EAAA0C,WAAAC,SAAA,GAAAC,SAAA,MAAqDxC,EAAA,UAAeE,OAAOuC,IAAA7C,EAAA8C,WAAAC,KAAA,iBAAyC/C,EAAA0B,KAAA1B,EAAAgD,GAAAhD,EAAA,gBAAAiD,GAA+C,OAAAA,EAAA,KAAA7C,EAAA,cAAmC8C,IAAAD,EAAAE,KAAA7C,OAAoB6C,KAAAF,EAAAE,MAAgBC,YAAApD,EAAAqD,KAAsBH,IAAA,UAAAI,GAAA,SAAAC,GAAiC,OAAAA,EAAA,IAAAnD,EAAA,OAA6BE,OAAOuC,IAAAU,EAAAV,KAAgBpC,IAAKsB,MAAA,SAAAC,GAAyBhC,EAAAwD,YAAAP,OAAuBjD,EAAA0B,WAAe1B,EAAA0B,OAAWtB,EAAA,KAAUiB,YAAA,aAAAoC,UAAmCC,UAAA1D,EAAAuB,GAAAvB,EAAA2D,WAAA3D,EAAA4D,kBAAqD,GAAAxD,EAAA,OAAgBiB,YAAA,gDAA0DjB,EAAA,OAAYiB,YAAA,gDAA0DrB,EAAA6D,UAAA,EAAAzD,EAAA,eAAwCiB,YAAA,qBAAAf,OAAwCwD,IAAA,MAAAC,GAAA,SAAAC,OAAA,MAAuC5D,EAAA,MAAWiB,YAAA,qCAAgDrB,EAAAgD,GAAAhD,EAAAiE,MAAAC,MAAA,cAAA9B,EAAA+B,GAC93D,IAAAhD,EAAAiB,EAAAjB,UAAoB,IAAAA,UACpB,IAAAiD,EAAAhC,EAAAgC,GACA,OAAAhE,EAAA,MAAgB8C,IAAAkB,EAAA/C,YAAA,oBAAAM,MAAA,gBAAAR,EAAA,IAAAkD,OAAoFC,OAAA,EAAAH,KAAoB/D,EAAA,OAAYE,OAAOuC,IAAA7C,EAAAuE,UAAApD,EAAAqD,gBAAsCpE,EAAA,QAAAJ,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAyE,GAAA,YAAAzE,GAAA6D,YAAA,WAAA7D,EAAA0B,MAAA,GAAAtB,EAAA,OAAkGiB,YAAA,qCAA+CrB,EAAA,KAAAI,EAAA,QAAAJ,EAAAsB,GAAA,MAAAtB,EAAAuB,GAAAvB,EAAAyE,GAAA,YAAAzE,GAAA0E,UAAA1E,EAAA0B,KAAAtB,EAAA,QAAAJ,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAyE,GAAA,YAAAzE,GAAA2E,KAAAC,iBAAA,gBAAAxE,EAAA,OAA0LiB,YAAA,yDAAmEjB,EAAA,UAAeiB,YAAA,gBAAAZ,IAAgCsB,MAAA/B,EAAA6E,cAAwB7E,EAAAsB,GAAA,SAAAlB,EAAA,KAA0BiB,YAAA,oBAA8BjB,EAAA,KAAUE,OAAOwE,KAAA,kBAAuB9E,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAyE,GAAA,YAAAzE,GAAA+E,OAAAC,WAAAhF,EAAAsB,GAAA,SAAAlB,EAAA,KAAkFE,OAAOwE,KAAA,kBAAuB9E,EAAAsB,GAAAtB,EAAAuB,KAAAvB,EAAA+E,OAAAE,WAAAjF,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAkF,iBAAA9E,EAAA,eAA6FiB,YAAA,oCAAAf,OAAuDwD,IAAA,KAAAC,GAAA,YAAAC,OAAA,MAAyChE,EAAAgD,GAAAhD,EAAA,oBAAAmF,GAAwC,OAAA/E,EAAA,MAAgB8C,IAAAiC,EAAAf,GAAA/C,YAAA,0DAAAM,MAAA,gBAAAwD,EAAAhE,KAAA,MAA0Hf,EAAA,OAAYE,OAAOuC,IAAA7C,EAAAuE,UAAAY,EAAAhE,KAAAqD,eAA0CxE,EAAAoF,WAAAC,OAAA,EAAAjF,EAAA,MAAuCiB,YAAA,uBAAiCjB,EAAA,OAAYiB,YAAA,wBAAAiE,aAAiDC,KAAA,aAAkBnF,EAAA,OAAYE,OAAO4B,aAAA,2BAAkClC,EAAA0B,MAAA,SAAAtB,EAAA,aAAyCE,OAAOyC,KAAA,UAAe3C,EAAA,OAAYiB,YAAA,6BAAAf,OAAgD8D,GAAA,kBAAqBhE,EAAA,MAAWiB,YAAA,2CAAqDjB,EAAA,MAAAJ,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAyE,GAAA,YAAAzE,GAAAwF,eAAA,WAAAxF,EAAAgD,GAAAhD,EAAA,mBAAAyF,GAAoH,OAAArF,EAAA,gBAA0B8C,IAAA,kBAAAuC,EAAA,GAAAnF,OAA8CoF,QAAA,EAAAD,WAAgChF,IAAKsB,MAAA/B,EAAA2F,kBAA4B3F,EAAAgD,GAAAhD,EAAA,kBAAAyF,GAA0C,OAAArF,EAAA,gBAA0B8C,IAAAuC,EAAArB,GAAA9D,OAAsBmF,WAAkBhF,IAAKsB,MAAA/B,EAAA2F,kBAA4BvF,EAAA,OAAYiB,YAAA,sDAAgErB,EAAA,UAAAI,EAAA,QAA6BiB,YAAA,iBAA2BrB,EAAAsB,GAAA,gBAAAlB,EAAA,QAAoCiB,YAAA,gBAAAZ,IAAgCsB,MAAA,SAAAC,GAAyBA,EAAA4D,kBAAyB5F,EAAA6F,kBAAA7F,EAAA8F,cAAsC9F,EAAAsB,GAAA,eAAAtB,EAAAuB,GAAAvB,EAAA+F,YAAA,kDACx0EC,6JC2IAC,GACAzE,KAAA,aACA0E,YACAC,cAAA,KACAC,YAAAC,EAAA,KACAC,WAAA,MAEAC,KAPA,WAQA,OACA5B,QACAnE,SAAA,EACAgG,UAAA,EAEAC,YACAC,aACAtB,cAEAW,aAAA,EACAY,WAAA,EACAb,SAAA,EACA3E,UAGAyF,SAAYC,OAAAC,EAAA,KAAAD,IACZA,OAAAE,EAAA,KAAAF,EAAA,iBACAG,OAFA,WAGA,OAAA/G,KAAAgH,OAAAC,OAAAF,QAEAxE,MALA,WAMA,OAAAvC,KAAA0E,KAAAnC,OAEAM,WARA,WASA,QAAA7C,KAAAuC,OAAA,GAAA2E,OACAlH,KAAAmH,MAAAC,SAAAC,QADA,WAAAH,OACAlH,KAAAuC,MAAA+E,WAGAhF,MAbA,WAcA,OAAAtC,KAAA0E,KAAApC,OAEAG,WAhBA,WAiBA,QAAAzC,KAAAuC,OAAA,GAAA2E,OACAlH,KAAAmH,MAAAC,SAAAC,QADA,WAAAH,OACAlH,KAAAuC,MAAA+E,WAGA9F,OArBA,WAsBA,OAAAxB,KAAA0E,KAAA6C,UAAAvH,KAAAwH,YAAArD,IAEAH,OACAyD,IADA,WAEA,OAAAzH,KAAA0E,KAAAV,WAEA0D,IAJA,SAIAC,GACA3H,KAAA0E,KAAAV,MAAA2D,IAGArH,OACAmH,IADA,WAEA,QAAAzH,KAAA0E,KAAAkD,UAEAF,IAJA,SAIAC,GACA3H,KAAA0E,KAAAkD,SAAAD,IAGA/D,WACA6D,IADA,WAEA,OAAAzH,KAAA0E,KAAAmD,YAAA,GAEAH,IAJA,SAIAC,GACA3H,KAAA0E,KAAAmD,aAAAF,IAGApC,cACAkC,IADA,WAEA,OAAAzH,KAAA0E,KAAAoD,oBAAA,GAEAJ,IAJA,SAIAC,GACA3H,KAAA0E,KAAAoD,mBAAAH,IAGA7C,OAxDA,WAyDA,OAAA9E,KAAA0E,KAAAI,YAEAiD,OA3DA,WA4DA,OAAA/H,KAAA0E,KAAAqD,YAEAtD,KA9DA,WA+DA,OAAAzE,KAAA0E,KAAAsD,YAAA,IAEArE,YAjEA,WAkEA,OAAA3D,KAAA0E,KAAAuD,cAAA,IAEAC,SApEA,WAqEA,OAAAlI,KAAAmI,OAAAC,MAAAC,QAAAH,UAEAI,aACAb,IADA,WAEA,OAAAzH,KAAA0E,KAAA4D,aAEAZ,IAJA,SAIAC,GACA3H,KAAA0E,KAAA4D,YAAAX,IAGA/F,UACA6F,IADA,WAEA,IAAAc,GACAC,UACAC,KAAA,KACA5G,OAAA,WACAK,KAAA,kBAEAwG,QACAD,KAAA,MACA5G,OAAA,SACAK,KAAA,gBAEAyG,YACAF,KAAA,OACA5G,OAAA,aACAK,KAAA,qBAfA0G,EAkBA5I,KAAAkB,KAAA2H,EAlBAD,EAkBAC,SAAAC,EAlBAF,EAkBAE,UACA,OAAAP,EACAM,GAAAC,EACA,aACAD,EACA,SACA,aAIAnB,IA7BA,SA6BAC,GACA3H,KAAAkB,KAAA2H,SAAAlB,MAIAoB,UAxIA,WAyIA/I,KAAA+G,SACA/G,KAAAwG,YACAxG,KAAA0E,QACA1E,KAAAmF,cACAnF,KAAAgJ,cAGAC,YAhJA,WAiJAjJ,KAAAO,SAAA,EACAP,KAAAkJ,OACA5G,MAAA,GACA6G,KAAA,GACAC,KAAA,IAEApJ,KAAAqJ,QACAC,MAAA,GACAC,UAAA,EACAC,SAAA,GACAC,UAAA,KAGAC,SACAhG,WADA,SACAiG,GAEA,IAAAC,EAAA,0CACAD,IAAAE,QAAAD,EAAA,mCAGAD,IAAAE,QAAA,cAEA,IAAAC,EAAA,kFACA,OAAAH,EACAA,EAAAE,QACAC,EACA,SAAAV,GAAA,sCAAAlC,OACAkC,EADA,mCAGA,IAEAJ,UAlBA,SAkBAe,GAAA,IAAAC,EAAAhK,KACA,IAAAA,KAAAuG,SAAA,CACAvG,KAAAuG,UAAA,EACA,IAAA0D,EACAC,OAAAC,SAAAC,OACA,aAAAC,OAAA,eAAAjF,OAAA,GACApF,KAAAgH,OAAAsD,SACAC,EACA,QAAAvK,KAAAmI,OAAAC,MAAAC,QAAAmC,GAAAN,OAAAO,QAAAR,EACAjK,KAAAmH,MACAM,IADA,UAAAP,OACAlH,KAAA+G,SACA2D,KAAA,SAAAC,GAAA,IAAAC,EAAAD,EAAArE,YAAA,IAAAsE,OACAZ,EAAAtF,KAAA4B,EACA0D,EAAAzD,UAAA,EACAyD,EAAAa,gBACAb,EAAApE,oBACAoE,EAAAc,eACAd,EAAA9B,UACAtB,OAAAmE,EAAA,KAAAnE,CAAA2D,GACAjI,MAAA,GAAA4E,OAAAZ,EAAApF,KAAAK,KAAA,OACA4H,KAAA,GAAAjC,OAAAZ,EAAA2B,cACAmB,KAAAa,EACAe,OACA1E,EAAAyB,OAAA3C,OAAA,KAAA8B,OACA8C,EAAA7C,MAAAC,SAAAC,QADA,WAAAH,OAEAZ,EAAAyB,OAAA,GAAA7E,MAEA,KAEA6G,GAAA,oBAAAA,GACAA,MAGAkB,MAAA,WACAjB,EAAAkB,SACAnB,GAAA,oBAAAA,GACAA,QAIAc,cA1DA,WA0DA,IAAAM,EAAAnL,KACM4G,OAAA1F,EAAA,KAAA0F,CAAN5G,KAAA0E,KAAA6C,SAAA,GAAAmD,KAAA,SAAAxJ,GACAiK,EAAAjK,KAAA0F,OAAAwE,UAAAD,EAAAjK,QACAiK,EAAA5K,SAAA,KAGAqF,kBAhEA,WAgEA,IAAAyF,EAAArL,KAAAsL,EAAAC,UAAAnG,OAAA,QAAAoG,IAAAD,UAAA,GAAAA,UAAA,KACAvL,KAAA8F,cACA9F,KAAA8F,aAAA,EACM2F,EAAA,KACNzL,KAAA+G,QAAAuE,UACAZ,KAAA,SAAAgB,GAAA,IAAAC,EAAAD,EAAApF,KAAAsF,EAAAD,EAAAE,eAAA,IAAAD,OAAAE,EAAAH,EAAAnF,gBAAA,IAAAsF,OACA,GAAAR,EAMAD,EAAA7E,SAAAI,OAAAmF,EAAA,KAAAnF,CAAAyE,EAAA7E,UAAAU,OAAAN,OAAAmF,EAAA,KAAAnF,CAAAJ,QANA,CACA6E,EAAA5E,UAAAoF,EAEA,IAAAG,EAAAH,EAAAI,IAAA,SAAAC,GAAA,OAAAA,EAAA/H,KACAkH,EAAA7E,WAAA2F,OAAA,SAAAC,GAAA,OAAAJ,EAAAK,QAAAD,EAAAjI,IAAA,IAKAqC,EAAApB,SACAiG,EAAAxF,SAAAW,IAAApB,OAAA,GAAAjB,IAGAkH,EAAA3E,UAAAF,EAAApB,SAAAkH,EAAA,KACAjB,EAAAkB,UAAA,WACAlB,EAAAvF,aAAA,EACAuF,EAAA9K,SAAA,MAGA0K,MAAA,WACAI,EAAA9K,SAAA,EACA8K,EAAAvF,aAAA,MAGAgF,aA9FA,WA8FA,IAAA0B,EAAAxM,KACMyL,EAAA,KAANzL,KAAA+G,QAAA0F,MAAA,KAAA/B,KAAA,SAAAgC,GAAA,IAAAC,EAAAD,EAAApG,YAAA,IAAAqG,OACAH,EAAArH,WAAAmB,KAGAhC,UAnGA,SAmGAC,GACA,OAAAA,GACAA,EAAAqI,KADA,MAGAhI,WAvGA,WAuGA,IAAAiI,EAAA7M,KACA+J,EAAA,SAAA/E,GACA6H,EAAA/B,eACA+B,EAAAnI,KAAAoI,eAAA,EACAD,EAAAnI,KAAAqI,eAAA/H,GAEAhF,KAAAgN,KAAAC,MAAA,UACAnK,KAAA,OACAwJ,IAAAb,EAAA,KACAyB,QAAAlN,KAAA+G,OACAgD,cAGArJ,SApHA,WAoHA,IAAAyM,EAAAnN,KACAoN,EAAApN,KAAAM,MAAA,gBACAsM,EAAA5M,KAAAM,MAAA,UAAA4G,OACAlH,KAAA+G,OADA,qBAAAG,OAEAlH,KAAA+G,OAFA,SAGA/G,KAAAuG,WACAvG,KAAAuG,UAAA,EACAvG,KAAAmH,OACAiG,SACAR,MACAS,eAAA,SAAAC,GAAA,aAAAA,GAAA,MAAAA,KAEA5C,KAAA,WACA,SAAA0C,GACAD,EAAA7M,OAAA,EACA6M,EAAAvJ,WAAA,EACAuJ,EAAAnJ,MAAAoB,OAAA,IACA+H,EAAAnJ,MAAA4C,OAAAmF,EAAA,KAAAnF,CACAuG,EAAAnJ,OADAkD,SAGAhG,KAAAiM,EAAA3F,YACArD,IAAA,IAAAoJ,MAAAC,UACAjG,QAAA4F,EAAA3F,YAAArD,SAGAgJ,EAAA7M,OAAA,EACA6M,EAAAvJ,WAAA,EACAuJ,EAAAnJ,MAAAmJ,EAAAnJ,MAAAmI,OAAA,SAAAsB,GACA,OAAAA,EAAAlG,UAAA4F,EAAA3F,YAAArD,MAGAgJ,EAAA5G,UAAA,IAEA0E,MAAA,WACAkC,EAAA5G,UAAA,MAGAvF,YAzJA,WAyJA,IAAA0M,EAAA1N,KACAA,KAAAgN,KAAAC,MAAA,gBACAU,KAAA,SAAAlF,GACAiF,EAAAE,aAAAC,KAAApF,QAIA7H,UAhKA,WAiKAZ,KAAAkI,SAAAlI,KAAA8N,SAAAC,QAAA,gBACA/N,KAAA8N,SAAAC,QAAA,kBAEAjN,WApKA,WAoKA,IAAAkN,EAAAhO,KACAiO,IAEAxF,KAAAzI,KAAAsI,YAAA,YACA8E,OAAA,WAGA,IAAAR,EACAsB,EACAd,EACAY,EAAA1F,aACA4F,EAAA,OACAd,EAAA,SACAR,EAAA,UAAA1F,OAAA8G,EAAAjH,OAAA,gBACAmH,EAAA,UACAd,EAAA,OACAR,EAAA,UAAA1F,OAAA8G,EAAAjH,OAAA,iBACAiH,EAAA7G,OACAyF,MACAQ,SACAC,eAAA,SAAAC,GAAA,aAAAA,GAAA,MAAAA,KACA5C,KAAA,WACAsD,EAAAF,SAAAC,QAAAG,GACAF,EAAA1F,aAAA0F,EAAA1F,iBAMA6F,EAAAnO,KAAAwB,SAGAiH,KAAA,SACA2E,OAAA,WACAY,EAAAhB,KAAAC,MAAA,YACAnK,KAAA,OACAwJ,IAAAb,EAAA,KACAyB,QAAAc,EAAAjH,YAKA0B,KAAA,OACA2E,OAAA,WACAgB,WAAA,WACA,IAAAC,IAEA5F,KAAA,KACArE,OAAAkK,MAAA,WACAlB,OAAA,WACgB3B,EAAA,KAAhBuC,EAAAjH,QAAA2D,KAAA,WACAsD,EAAAF,SAAAC,QAAA,UACAC,EAAA9C,cAKA8C,EAAAhB,KAAAC,MACA,cACAoB,EACA,KACA,UAEA,UAMA5F,KAAA,KACA2E,OAAA,WACAY,EAAAF,SAAAS,KAAA,mBAIAvO,KAAAgN,KAAAC,MAAA,cAAAgB,EAAA/G,OAAAiH,GAAA,OAEAzI,aAjPA,SAiPA8I,EAAAC,EAAAC,GAAA,IAAAC,EAAA3O,KAEA,GAAAwO,IAAAxO,KAAAwH,YAAArD,GAAA,CAEA,IAAAyK,EAAAJ,IAAAxO,KAAAkB,KAAAiD,GACAkK,IAEA5F,KAAAmG,EAAA,gBACAxB,OAAA,WACAuB,EAAA3B,KAAAC,MAAA,YACA2B,UACA9L,KAAA,cACAwJ,IAAAb,EAAA,KACAyB,SAAA2B,OAAAF,EAAA5H,OAAA2H,aACA3E,SAAA4E,EAAA/I,uBAIA6C,KAAA,OAAA2E,OAAA,kBAAAuB,EAAAG,cAAAJ,MAEA1O,KAAAgN,KAAAC,MAAA,cAAAoB,EAAA,WAEArO,KAAAgN,KAAAC,MAAA,gBACA8B,YAAA,OAAA7H,OAAAuH,GACAd,KAAA,SAAAlF,GACAkG,EAAAf,aAAAoB,WAAAR,EAAAX,KAAApF,QAKAmF,YA/QA,SAAAqB,GA+QA,IAAAC,EAAAlP,KAAAmP,EAAAF,EAAAD,WAAAnB,EAAAoB,EAAApB,KACA5G,KACA4G,KAAAzI,OAAA,GACA6B,EAAA4G,OACAsB,IAAAlI,EAAA,cAAAkI,GACAnP,KAAAmH,MACAiI,KADA,UAAAlI,OACAlH,KAAA+G,OADA,aACAE,GACAoG,eAAA,SAAAC,GAAA,aAAAA,KAEA5C,KAAA,SAAA2E,GAAA,IAAAC,EAAAD,EAAA/I,KAAAgJ,OAAA,IAAAA,GAAA9J,YAAA8J,EAAA,IAAA9J,EAAA8J,EAAA9J,QACA0J,EAAApB,SAAAC,QAAA,QACAmB,EAAA1I,SAAA+I,QAAA/J,GACA0J,EAAA3J,cAAA,EACA2J,EAAAlC,KAAAC,MAAA,2BAEAhC,MAAA,WACAiE,EAAApB,SAAA0B,MAAA,QACAN,EAAAlC,KAAAC,MAAA,4BAGAjN,KAAA8N,SAAA0B,MAAA,aAGAV,cAtSA,SAsSAJ,GAAA,IAAAe,EAAAzP,KACMyL,EAAA,KAANzL,KAAA+G,OAAA2H,GAAAhE,KAAA,WACA+E,EAAA7J,oBACA6J,EAAAlK,cAAA,EACAkK,EAAA3B,SAAAC,QAAA,aAGA/L,mBA7SA,SA6SAH,GAAA,IAAA6N,EAAA1P,KACA6B,IAAA7B,KAAA2P,cACA3P,KAAA2P,aAAA,EAEM/I,OAAA1F,EAAA,KAAA0F,EACNzC,GAAAnE,KAAAkB,KAAAiD,GACAtC,WACA6I,KAAA,SAAA7B,GACA6G,EAAA9N,SAAAiH,EACA6G,EAAAC,aAAA,MAGAtN,UAzTA,WAyTA,IAAAuN,EAAA5P,KACAA,KAAAgJ,UAAA,WACA4G,EAAAC,MAAAC,SAAAC,YAGAxM,YA9TA,SA8TAyM,GAAA,IAAAC,EAAAjQ,KACAgQ,IAAA,IAAAA,EAAAE,OAEAlQ,KAAAmQ,QAAAC,QAAA,mBACApQ,KAAAgN,KAAAC,MAAA,UACAoD,SAAA,KACAC,KAAAN,YACAhL,OAAAgL,EAAAhL,OACAuL,UAAA,SAAAjK,GACA2J,EAAAnC,SAAAC,QAAAzH,GACA2J,EAAAvL,KAAAqD,OAAA,KACAkI,EAAAjH,eAIAhJ,KAAAuM,UAAA,WACA,IAAAiE,EAAAP,EAAAjJ,OAAAsD,SACA2F,EAAAQ,QAAAC,MACAF,KAAA,UACAG,OAAAC,SAAAJ,WC9nBmWK,EAAA,0BCQnWC,EAAgBlK,OAAAmK,EAAA,KAAAnK,CACdiK,EACA/Q,EACAiG,GACF,EACA,KACA,WACA,MAIA+K,EAAAE,QAAAC,OAAA,iBACeC,EAAA,WAAAJ,sDCpBf,IAAAhR,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBiB,YAAA,WAAqBjB,EAAA,OAAYiB,YAAA,sDAAgEjB,EAAA,MAAWiB,YAAA,6EAAuFjB,EAAA,eAAoBE,OAAOyD,IAAMvC,KAAA,QAAAoP,OAAuB7N,KAAA,QAAgBe,IAAA,KAAAsN,eAAA,SAAAC,MAAA,GAAAvH,QAAA,MAA6D1J,EAAA,KAAAJ,EAAAsB,GAAA,UAAAlB,EAAA,eAA6CE,OAAOyD,IAAMvC,KAAA,QAAAoP,OAAuB7N,KAAA,QAAgBe,IAAA,KAAAsN,eAAA,SAAAC,MAAA,GAAAvH,QAAA,MAA6D1J,EAAA,KAAAJ,EAAAsB,GAAA,UAAAlB,EAAA,eAA6CE,OAAOyD,IAAMvC,KAAA,QAAAoP,OAAuB7N,KAAA,WAAmBe,IAAA,KAAAsN,eAAA,SAAAC,MAAA,GAAAvH,QAAA,MAA6D1J,EAAA,KAAAJ,EAAAsB,GAAA,gBAAAlB,EAAA,gBAAoDgC,IAAA,WAAAf,YAAA,cAAAf,OAAgDgR,aAAA,GAAiB7Q,IAAK6B,UAAAtC,EAAAsC,UAAAiP,WAAAvR,EAAAuR,cAAuD,QAAAvR,EAAAwR,SAAApR,EAAA,aAA2CE,OAAOyC,KAAA,cAAmB/C,EAAA0B,KAAAtB,EAAA,MAAoBiB,YAAA,gBAA0BrB,EAAAgD,GAAAhD,EAAA,gBAAA2E,EAAAR,GAA2C,OAAAQ,EAAA,GAAAvE,EAAA,MAA0B8C,IAAA,eAAAlD,EAAAwR,SAAA,IAAA7M,EAAA,OAAAR,IAAoE/D,EAAA,aAAkBE,OAAOqE,OAAAe,QAAA,MAA2B,GAAA1F,EAAA0B,OAAe1B,EAAAgD,GAAAhD,EAAA,eAAAyR,EAAAtN,GAA0C,OAAA/D,EAAA,MAAgB8C,IAAA,QAAAlD,EAAAwR,SAAA,IAAAC,EAAA,OAAAtN,IAA6DsN,EAAA,QAAArR,EAAA,aAAiCE,OAAOqE,KAAA8M,KAAazR,EAAA0B,KAAA+P,EAAA,SAAArR,EAAA,gBAA8CE,OAAOoR,GAAAD,KAAWzR,EAAA0B,MAAA,MAAe,OAAAtB,EAAA,mBAC59C4F,+DCDI2L,EAAM,WAAgB,IAAA3R,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,KAAeiB,YAAA,qBAAAf,OAAwCwE,KAAA9E,EAAA0R,GAAAnL,KAAA8C,QAAyBjJ,EAAA,OAAYiB,YAAA,UAAoBjB,EAAA,UAAeE,OAAOa,KAAAnB,EAAA0R,GAAAnL,QAAoBnG,EAAA,WAAgBiB,YAAA,wDAAkEjB,EAAA,UAAeiB,YAAA,gDAA0DjB,EAAA,MAAWiB,YAAA,gCAA0CrB,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAA0R,GAAAnL,KAAA/E,SAAApB,EAAA,OAA+CiB,YAAA,uBAAiCjB,EAAA,QAAAJ,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAAyE,GAAA,aAAAzE,GAAA0E,KAAA,iBAAAtE,EAAA,WAAwFiB,YAAA,gBAA0BrB,EAAA0R,GAAAnL,KAAAqL,QAAAvM,OAAA,EAAAjF,EAAA,OAA6CiB,YAAA,eAAyBjB,EAAA,KAAUiB,YAAA,4BAAsCrB,EAAAsB,GAAAtB,EAAAuB,GAAAvB,EAAA0R,GAAAnL,KAAAqL,YAAAxR,EAAA,OAAkDiB,YAAA,UAAoBjB,EAAA,OAAYE,OAAOuC,IAAA7C,EAAA0R,GAAAnL,KAAAsL,aAAyB7R,EAAA0B,UAAA,GAAA1B,EAAA8R,GAAA,MACz2BC,GAAe,WAAiB,IAAA/R,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,UAAoBiB,YAAA,kCAA4CjB,EAAA,OAAYiB,YAAA,gDAA0DjB,EAAA,QAAaiB,YAAA,oBAA8BrB,EAAAsB,GAAA,0BCuCpR0Q,GACAxQ,KAAA,WACA+B,OACAmO,IAAA3O,KAAA8D,OAAAoL,UAAA,IAEArL,UACAlC,KADA,WACA,IAAAkG,EACA3K,KAAAyR,GAAAnL,SAAA7B,EADAkG,EACAlG,KACA,WAAA8I,KAAA9I,GAAAwN,EAAA,iBChDkXC,EAAA,0BCQlXpB,EAAgBlK,OAAAmK,EAAA,KAAAnK,CACdsL,EACAR,EACAI,GACF,EACA,KACA,WACA,MAIAhB,EAAAE,QAAAC,OAAA,iBACe,IAAAkB,EAAArB,kCC2DfsB,GAAA,sBAEAC,GACA9Q,KAAA,WACA0E,YAAAqM,WAAA,KAAAC,WAAA,KAAAJ,cACA7L,KAHA,WAIA,UAEAK,UACA4K,SADA,WAEA,OAAAvR,KAAAgH,OAAA2J,MAAA7N,MAEA2I,MAJA,WAKA,OAAAzL,KAAAmI,OAAAqK,QAAA,QAAAtL,OAAAlH,KAAAuR,YAEA9L,OAPA,WAQA,OAAAzF,KAAAmI,OAAAqK,QAAA,gBAEAlH,MAVA,WAWA,IAAAmH,EAAAzS,KAAAyL,MAAArG,OACA,OAAAqN,EACA,QAAAzS,KAAAuR,SAAAvR,KAAAyL,MAAAgH,EAAA,GAAAtO,GACAnE,KAAAyL,MAAAgH,EAAA,GAAAC,IAFA,IAKAC,OACApB,SADA,SACA5J,EAAAiL,GACAR,EAAAS,SAAAlL,IACAiL,GACA5S,KAAA6P,MAAAC,SAAAgD,kBAGAC,QA9BA,WA+BA/S,KAAAmI,OAAA6K,SAAA,qBACAhT,KAAAqC,UAAA4Q,EAAA,OAEAvJ,SACArH,UADA,eAAA6Q,EAAAtM,OAAAuM,EAAA,KAAAvM,CAAAwM,mBAAAC,KAAA,SAAAC,EACAvJ,GADA,IAAAjH,EAAAyQ,EAAAjN,EAAA,OAAA8M,mBAAAI,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAEA7Q,EAAA9C,KAAAuR,SAAA1H,QAAA,eAAAyD,GAAA,OAAAA,EAAAsG,gBACAL,EAHA,WAAArM,OAGApE,EAHA,SAAA2Q,EAAAE,KAAA,EAIA3T,KAAAmI,OAAA6K,SAAAO,GAAAM,SAAA,IAJA,OAIAvN,EAJAmN,EAAAK,KAKA/J,EAAAzD,EAAAlB,OAAA,IALA,wBAAAqO,EAAAM,SAAAT,EAAAtT,SAAA,gBAAAgU,GAAA,OAAAd,EAAAe,MAAAjU,KAAAuL,YAAA,GAOA+F,WAPA,eAAA4C,EAAAtN,OAAAuM,EAAA,KAAAvM,CAAAwM,mBAAAC,KAAA,SAAAc,EAOApK,GAPA,IAAAjH,EAAAyQ,EAAAjN,EAAA,OAAA8M,mBAAAI,KAAA,SAAAY,GAAA,eAAAA,EAAAV,KAAAU,EAAAT,MAAA,cAQA7Q,EAAA9C,KAAAuR,SAAA1H,QAAA,eAAAyD,GAAA,OAAAA,EAAAsG,gBACAL,EATA,WAAArM,OASApE,EATA,SAAAsR,EAAAT,KAAA,EAUA3T,KAAAmI,OAAA6K,SAAAO,GAAAjI,MAAAtL,KAAAsL,QAVA,OAUAhF,EAVA8N,EAAAN,KAWA/J,EAAAzD,EAAAlB,OAAA,IAXA,wBAAAgP,EAAAL,SAAAI,EAAAnU,SAAA,gBAAAqU,GAAA,OAAAH,EAAAD,MAAAjU,KAAAuL,YAAA,KCnHiW+I,EAAA,ECQ7VC,aAAY3N,OAAAmK,EAAA,KAAAnK,CACd0N,EACAxU,EACAiG,GACF,EACA,KACA,WACA,OAIAwO,EAASvD,QAAAC,OAAA,eACMC,EAAA,WAAAqD,+CCpBf,IAAAC,EAAA7U,EAAA,QAAA8U,EAAA9U,EAAAE,EAAA2U,GAAklBC,EAAG,0GCArlB,IAAAC,EAAA/U,EAAA,QAAAgV,EAAAhV,EAAAE,EAAA6U,GAA2jBC,EAAG","file":"js/feed-f42f458b110c8a02e504.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedDetail.vue?vue&type=style&index=0&id=500756aa&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedDetail.vue?vue&type=style&index=0&id=500756aa&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article-card',{attrs:{\"liked\":_vm.liked,\"loading\":_vm.loading},on:{\"on-like\":_vm.likeFeed,\"on-share\":_vm.shareFeed,\"on-more\":_vm.moreAction,\"on-comment\":_vm.commentFeed}},[_c('common-header',{attrs:{\"slot\":\"head\"},slot:\"head\"},[_c('avatar',{attrs:{\"user\":_vm.user,\"size\":\"tiny\"}}),_c('span',{staticClass:\"m-text-cut m-flex-none username\"},[_vm._v(\"\\n      \"+_vm._s(_vm.user.name)+\"\\n    \")]),(!_vm.isMine)?_c('template',{class:{ c_59b6d7: _vm.relation.status !== 'unFollow' },slot:\"right\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\",on:{\"click\":function($event){_vm.followUserByStatus(_vm.relation.status)}}},[_c('use',{attrs:{\"xlink:href\":_vm.relation.icon}})])]):_vm._e()],2),_c('load-more',{ref:\"loadmore\",attrs:{\"on-refresh\":_vm.onRefresh}},[_c('main',{staticClass:\"m-flex-shrink1 m-flex-grow1 m-art m-main\"},[_c('div',{staticClass:\"m-art-body\"},[(_vm.title)?_c('h2',[_vm._v(_vm._s(_vm.title))]):_vm._e(),(!!_vm.video)?_c('video',{staticClass:\"feed-detail-video\",attrs:{\"poster\":_vm.cover_file,\"controls\":\"\",\"autoplay\":\"\"}},[_c('source',{attrs:{\"src\":_vm.video_file,\"type\":\"video/mp4\"}})]):_vm._e(),_vm._l((_vm.images),function(img){return (img.file)?_c('async-file',{key:img.file,attrs:{\"file\":img.file},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return (props.src)?_c('img',{attrs:{\"src\":props.src},on:{\"click\":function($event){_vm.onFileClick(img)}}}):_vm._e()}}])}):_vm._e()}),_c('p',{staticClass:\"m-text-box\",domProps:{\"innerHTML\":_vm._s(_vm.formatBody(_vm.feedContent))}})],2),_c('div',{staticClass:\"m-box m-aln-center m-justify-bet m-art-foot\"},[_c('div',{staticClass:\"m-flex-grow1 m-flex-shrink1 m-art-like-list\"},[(_vm.likeCount > 0)?_c('router-link',{staticClass:\"m-box m-aln-center\",attrs:{\"tag\":\"div\",\"to\":\"likers\",\"append\":\"\"}},[_c('ul',{staticClass:\"m-box m-flex-grow0 m-flex-shrink0\"},_vm._l((_vm.likes.slice(0, 5)),function(ref,index){\nvar user = ref.user; if ( user === void 0 ) user = {};\nvar id = ref.id;\nreturn _c('li',{key:id,staticClass:\"m-avatar-box tiny\",class:(\"m-avatar-box-\" + (user.sex)),style:({ zIndex: 5-index })},[_c('img',{attrs:{\"src\":_vm.getAvatar(user.avatar)}})])})),_c('span',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.likeCount))+\"人点赞\")])]):_vm._e()],1),_c('div',{staticClass:\"m-box-model m-aln-end m-art-info\"},[(_vm.time)?_c('span',[_vm._v(\"发布于\"+_vm._s(_vm._f(\"time2tips\")(_vm.time)))]):_vm._e(),_c('span',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.feed.feed_view_count || 0))+\"浏览\")])])]),_c('div',{staticClass:\"m-box-model m-box-center m-box-center-a m-art-reward\"},[_c('button',{staticClass:\"m-art-rew-btn\",on:{\"click\":_vm.rewardFeed}},[_vm._v(\"打 赏\")]),_c('p',{staticClass:\"m-art-rew-label\"},[_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.reward.count)))]),_vm._v(\"人打赏，共\"),_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(_vm._s(~~_vm.reward.amount))]),_vm._v(_vm._s(_vm.currencyUnit))]),_c('router-link',{staticClass:\"m-box m-aln-center m-art-rew-list\",attrs:{\"tag\":\"ul\",\"to\":\"rewarders\",\"append\":\"\"}},[_vm._l((_vm.rewardList),function(rew){return _c('li',{key:rew.id,staticClass:\"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny\",class:(\"m-avatar-box-\" + (rew.user.sex))},[_c('img',{attrs:{\"src\":_vm.getAvatar(rew.user.avatar)}})])}),(_vm.rewardList.length > 0)?_c('li',{staticClass:\"m-box m-aln-center\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\",staticStyle:{\"fill\":\"#bfbfbf\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-arrow-right\"}})])]):_vm._e()],2)],1)]),_c('detail-ad',{attrs:{\"type\":\"feed\"}}),_c('div',{staticClass:\"m-box-model m-art-comments\",attrs:{\"id\":\"comment_list\"}},[_c('ul',{staticClass:\"m-box m-aln-center m-art-comments-tabs\"},[_c('li',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.commentCount))+\"条评论\")])]),_vm._l((_vm.pinnedCom),function(comment){return _c('comment-item',{key:(\"pinned-comment-\" + (comment.id)),attrs:{\"pinned\":true,\"comment\":comment},on:{\"click\":_vm.replyComment}})}),_vm._l((_vm.comments),function(comment){return _c('comment-item',{key:comment.id,attrs:{\"comment\":comment},on:{\"click\":_vm.replyComment}})}),_c('div',{staticClass:\"m-box m-aln-center m-justify-center load-more-box\"},[(_vm.noMoreCom)?_c('span',{staticClass:\"load-more-ph\"},[_vm._v(\"---没有更多---\")]):_c('span',{staticClass:\"load-more-btn\",on:{\"click\":function($event){$event.stopPropagation();_vm.fetchFeedComments(_vm.maxComId)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.fetchComing ? \"加载中...\" : \"点击加载更多\")+\"\\n        \")])])],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <article-card\n    :liked=\"liked\"\n    :loading=\"loading\"\n    @on-like=\"likeFeed\"\n    @on-share=\"shareFeed\"\n    @on-more=\"moreAction\"\n    @on-comment=\"commentFeed\">\n\n    <common-header slot=\"head\">\n      <avatar :user=\"user\" size=\"tiny\" />\n      <span class=\"m-text-cut m-flex-none username\">\n        {{ user.name }}\n      </span>\n      <template\n        v-if=\"!isMine\"\n        slot=\"right\"\n        :class=\"{ c_59b6d7: relation.status !== 'unFollow' }\" >\n        <svg class=\"m-style-svg m-svg-def\" @click=\"followUserByStatus(relation.status)\">\n          <use :xlink:href=\"relation.icon\"/>\n        </svg>\n      </template>\n    </common-header>\n\n    <!-- 内容 -->\n    <load-more ref=\"loadmore\" :on-refresh=\"onRefresh\">\n      <main class=\"m-flex-shrink1 m-flex-grow1 m-art m-main\">\n        <div class=\"m-art-body\">\n          <h2 v-if=\"title\">{{ title }}</h2>\n          <video\n            v-if=\"!!video\"\n            :poster=\"cover_file\"\n            class=\"feed-detail-video\"\n            controls\n            autoplay>\n            <source :src=\"video_file\" type=\"video/mp4\" >\n          </video>\n          <async-file\n            v-for=\"img in images\"\n            v-if=\"img.file\"\n            :key=\"img.file\"\n            :file=\"img.file\">\n            <img\n              v-if=\"props.src\"\n              slot-scope=\"props\"\n              :src=\"props.src\"\n              @click=\"onFileClick(img)\">\n          </async-file>\n          <p class=\"m-text-box\" v-html=\"formatBody(feedContent)\" />\n        </div>\n        <div class=\"m-box m-aln-center m-justify-bet m-art-foot\">\n          <div class=\"m-flex-grow1 m-flex-shrink1 m-art-like-list\">\n            <router-link\n              v-if=\"likeCount > 0\"\n              tag=\"div\"\n              class=\"m-box m-aln-center\"\n              to=\"likers\"\n              append>\n              <ul class=\"m-box m-flex-grow0 m-flex-shrink0\">\n                <li\n                  v-for=\"({user = {}, id}, index) in likes.slice(0, 5)\"\n                  :key=\"id\"\n                  :style=\"{ zIndex: 5-index }\"\n                  :class=\"`m-avatar-box-${user.sex}`\"\n                  class=\"m-avatar-box tiny\">\n                  <img :src=\"getAvatar(user.avatar)\">\n                </li>\n              </ul>\n              <span>{{ likeCount | formatNum }}人点赞</span>\n            </router-link>\n          </div>\n          <div class=\"m-box-model m-aln-end m-art-info\">\n            <span v-if=\"time\">发布于{{ time | time2tips }}</span>\n            <span>{{ feed.feed_view_count || 0 | formatNum }}浏览</span>\n          </div>\n        </div>\n        <div class=\"m-box-model m-box-center m-box-center-a m-art-reward\">\n          <button class=\"m-art-rew-btn\" @click=\"rewardFeed\">打 赏</button>\n          <p class=\"m-art-rew-label\"><a href=\"javascript:;\">{{ reward.count | formatNum }}</a>人打赏，共<a href=\"javascript:;\">{{ ~~reward.amount }}</a>{{ currencyUnit }}</p>\n          <router-link\n            tag=\"ul\"\n            to=\"rewarders\"\n            append\n            class=\"m-box m-aln-center m-art-rew-list\">\n            <li\n              v-for=\"rew in rewardList\"\n              :key=\"rew.id\"\n              :class=\"`m-avatar-box-${rew.user.sex}`\"\n              class=\"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny\">\n              <img :src=\"getAvatar(rew.user.avatar)\">\n            </li>\n            <li v-if=\"rewardList.length > 0\" class=\"m-box m-aln-center\">\n              <svg class=\"m-style-svg m-svg-def\" style=\"fill: #bfbfbf\">\n                <use xlink:href=\"#icon-arrow-right\"/>\n              </svg>\n            </li>\n          </router-link>\n        </div>\n      </main>\n\n      <!-- 详情页广告位 -->\n      <detail-ad type=\"feed\"/>\n\n      <!-- 评论列表 -->\n      <div id=\"comment_list\" class=\"m-box-model m-art-comments\">\n        <ul class=\"m-box m-aln-center m-art-comments-tabs\">\n          <li>{{ commentCount | formatNum }}条评论</li>\n        </ul>\n        <comment-item\n          v-for=\"(comment) in pinnedCom\"\n          :pinned=\"true\"\n          :key=\"`pinned-comment-${comment.id}`\"\n          :comment=\"comment\"\n          @click=\"replyComment\"/>\n        <comment-item\n          v-for=\"(comment) in comments\"\n          :key=\"comment.id\"\n          :comment=\"comment\"\n          @click=\"replyComment\"/>\n        <div class=\"m-box m-aln-center m-justify-center load-more-box\">\n          <span v-if=\"noMoreCom\" class=\"load-more-ph\">---没有更多---</span>\n          <span\n            v-else\n            class=\"load-more-btn\"\n            @click.stop=\"fetchFeedComments(maxComId)\">\n            {{ fetchComing ? \"加载中...\" : \"点击加载更多\" }}\n          </span>\n        </div>\n      </div>\n    </load-more>\n  </article-card>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport ArticleCard from \"@/page/article/ArticleCard.vue\";\nimport CommentItem from \"@/page/article/ArticleComment.vue\";\nimport DetailAd from \"@/components/advertisement/DetailAd\";\nimport wechatShare from \"@/util/wechatShare.js\";\nimport { limit } from \"@/api\";\nimport { followUserByStatus, getUserInfoById } from \"@/api/user.js\";\nimport * as api from \"@/api/feeds.js\";\n\nexport default {\n  name: \"FeedDetail\",\n  components: {\n    ArticleCard,\n    CommentItem,\n    DetailAd\n  },\n  data() {\n    return {\n      feed: {},\n      loading: true,\n      fetching: false,\n\n      comments: [],\n      pinnedCom: [],\n      rewardList: [],\n\n      fetchComing: false,\n      noMoreCom: false,\n      maxComId: 0,\n      user: {}\n    };\n  },\n  computed: {\n    ...mapState([\"CURRENTUSER\"]),\n    feedID() {\n      return this.$route.params.feedID;\n    },\n    video() {\n      return this.feed.video;\n    },\n    video_file() {\n      return this.video\n        ? `${this.$http.defaults.baseURL}/files/${this.video.video_id}`\n        : false;\n    },\n    title() {\n      return this.feed.title;\n    },\n    cover_file() {\n      return this.video\n        ? `${this.$http.defaults.baseURL}/files/${this.video.video_id}`\n        : false;\n    },\n    isMine() {\n      return this.feed.user_id === this.CURRENTUSER.id;\n    },\n    likes: {\n      get() {\n        return this.feed.likes || [];\n      },\n      set(val) {\n        this.feed.likes = val;\n      }\n    },\n    liked: {\n      get() {\n        return !!this.feed.has_like;\n      },\n      set(val) {\n        this.feed.has_like = val;\n      }\n    },\n    likeCount: {\n      get() {\n        return this.feed.like_count || 0;\n      },\n      set(val) {\n        this.feed.like_count = ~~val;\n      }\n    },\n    commentCount: {\n      get() {\n        return this.feed.feed_comment_count || 0;\n      },\n      set(val) {\n        val > 0, (this.feed.feed_comment_count = val);\n      }\n    },\n    reward() {\n      return this.feed.reward || {};\n    },\n    images() {\n      return this.feed.images || [];\n    },\n    time() {\n      return this.feed.created_at || \"\";\n    },\n    feedContent() {\n      return this.feed.feed_content || \"\";\n    },\n    isWechat() {\n      return this.$store.state.BROWSER.isWechat;\n    },\n    has_collect: {\n      get() {\n        return this.feed.has_collect;\n      },\n      set(val) {\n        this.feed.has_collect = val;\n      }\n    },\n    relation: {\n      get() {\n        const relations = {\n          unFollow: {\n            text: \"关注\",\n            status: \"unFollow\",\n            icon: `#icon-unFollow`\n          },\n          follow: {\n            text: \"已关注\",\n            status: \"follow\",\n            icon: `#icon-follow`\n          },\n          eachFollow: {\n            text: \"互相关注\",\n            status: \"eachFollow\",\n            icon: `#icon-eachFollow`\n          }\n        };\n        const { follower, following } = this.user;\n        return relations[\n          follower && following\n            ? \"eachFollow\"\n            : follower\n              ? \"follow\"\n              : \"unFollow\"\n        ];\n      },\n\n      set(val) {\n        this.user.follower = val;\n      }\n    }\n  },\n  activated() {\n    if (this.feedID) {\n      this.comments = [];\n      this.feed = {};\n      this.rewardList = [];\n      this.fetchFeed();\n    }\n  },\n  deactivated() {\n    this.loading = true;\n    this.share = {\n      title: \"\",\n      desc: \"\",\n      link: \"\"\n    };\n    this.config = {\n      appid: \"\",\n      timestamp: 0,\n      noncestr: \"\",\n      signature: \"\"\n    };\n  },\n  methods: {\n    formatBody(str) {\n      // 脚本内容以纯文本方式显示\n      const scriptRegex = /<\\s*script\\s*>(.*?)<\\s*\\/\\s*script\\s*>/i;\n      str = str.replace(scriptRegex, \"&lt;script&gt;$1&lt;/script&gt;\");\n\n      // 换行符转换\n      str = str.replace(/\\n/g, \"<br>\");\n\n      const reg = /(https?|http|ftp|file):\\/\\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g;\n      return str\n        ? str.replace(\n            reg,\n            link =>\n              `<a class=\"m-art-links\" href=\"${link}\" target=\"__blank\">#网页链接#</a>`\n          )\n        : \"\";\n    },\n    fetchFeed(callback) {\n      if (this.fetching) return;\n      this.fetching = true;\n      const shareUrl =\n        window.location.origin +\n        process.env.BASE_URL.substr(0, process.env.BASE_URL.length - 1) +\n        this.$route.fullPath;\n      const signUrl =\n        this.$store.state.BROWSER.OS === \"IOS\" ? window.initUrl : shareUrl;\n      this.$http\n        .get(`/feeds/${this.feedID}`)\n        .then(({ data = {} }) => {\n          this.feed = data;\n          this.fetching = false;\n          this.fetchUserInfo();\n          this.fetchFeedComments();\n          this.fetchRewards();\n          this.isWechat &&\n            wechatShare(signUrl, {\n              title: `${data.user.name}的动态`,\n              desc: `${data.feed_content}`,\n              link: shareUrl,\n              imgUrl:\n                data.images.length > 0\n                  ? `${this.$http.defaults.baseURL}/files/${\n                      data.images[0].file\n                    }`\n                  : \"\"\n            });\n          if (callback && typeof callback === \"function\") {\n            callback();\n          }\n        })\n        .catch(() => {\n          this.goBack();\n          if (callback && typeof callback === \"function\") {\n            callback();\n          }\n        });\n    },\n    fetchUserInfo() {\n      getUserInfoById(this.feed.user_id, true).then(user => {\n        this.user = Object.assign({}, this.user, user);\n        this.loading = false;\n      });\n    },\n    fetchFeedComments(after = 0) {\n      if (this.fetchComing) return;\n      this.fetchComing = true;\n      api\n        .getFeedComments(this.feedID, { after })\n        .then(({ data: { pinneds = [], comments = [] } }) => {\n          if (!after) {\n            this.pinnedCom = pinneds;\n            // 过滤第一页中的置顶评论\n            const pinnedIds = pinneds.map(p => p.id);\n            this.comments = comments.filter(c => pinnedIds.indexOf(c.id) < 0);\n          } else {\n            this.comments = [...this.comments, ...comments];\n          }\n\n          if (comments.length) {\n            this.maxComId = comments[comments.length - 1].id;\n          }\n\n          this.noMoreCom = comments.length !== limit;\n          this.$nextTick(() => {\n            this.fetchComing = false;\n            this.loading = false;\n          });\n        })\n        .catch(() => {\n          this.loading = false;\n          this.fetchComing = false;\n        });\n    },\n    fetchRewards() {\n      api.getRewards(this.feedID, { limit: 10 }).then(({ data = [] }) => {\n        this.rewardList = data;\n      });\n    },\n    getAvatar(avatar) {\n      if (!avatar) return null;\n      return avatar.url || null;\n    },\n    rewardFeed() {\n      const callback = amount => {\n        this.fetchRewards();\n        this.feed.reward_number += 1;\n        this.feed.reward_amount += amount;\n      };\n      this.$bus.$emit(\"reward\", {\n        type: \"feed\",\n        api: api.rewardFeed,\n        payload: this.feedID,\n        callback\n      });\n    },\n    likeFeed() {\n      const method = this.liked ? \"delete\" : \"post\";\n      const url = this.liked\n        ? `/feeds/${this.feedID}/unlike`\n        : `/feeds/${this.feedID}/like`;\n      if (this.fetching) return;\n      this.fetching = true;\n      this.$http({\n        method,\n        url,\n        validateStatus: s => s === 201 || s === 204\n      })\n        .then(() => {\n          method === \"post\"\n            ? ((this.liked = true),\n              (this.likeCount += 1),\n              this.likes.length < 5 &&\n                (this.likes = [\n                  ...this.likes,\n                  {\n                    user: this.CURRENTUSER,\n                    id: new Date().getTime(),\n                    user_id: this.CURRENTUSER.id\n                  }\n                ]))\n            : ((this.liked = false),\n              (this.likeCount -= 1),\n              (this.likes = this.likes.filter(like => {\n                return like.user_id !== this.CURRENTUSER.id;\n              })));\n\n          this.fetching = false;\n        })\n        .catch(() => {\n          this.fetching = false;\n        });\n    },\n    commentFeed() {\n      this.$bus.$emit(\"commentInput\", {\n        onOk: text => {\n          this.sendComment({ body: text });\n        }\n      });\n    },\n    shareFeed() {\n      if (this.isWechat) this.$Message.success(\"请点击右上角微信分享😳\");\n      else this.$Message.success(\"请使用浏览器的分享功能😳\");\n    },\n    moreAction() {\n      const defaultActions = [\n        {\n          text: this.has_collect ? \"取消收藏\" : \"收藏\",\n          method: () => {\n            // POST /feeds/:feed/collections\n            // DELETE /feeds/:feed/uncollect\n            let url;\n            let txt;\n            let method;\n            this.has_collect\n              ? ((txt = \"取消收藏\"),\n                (method = \"delete\"),\n                (url = `/feeds/${this.feedID}/uncollect`))\n              : ((txt = \"已加入我的收藏\"),\n                (method = \"post\"),\n                (url = `/feeds/${this.feedID}/collections`));\n            this.$http({\n              url,\n              method,\n              validateStatus: s => s === 204 || s === 201\n            }).then(() => {\n              this.$Message.success(txt);\n              this.has_collect = !this.has_collect;\n            });\n          }\n        }\n      ];\n\n      const actions = this.isMine\n        ? [\n            {\n              text: \"申请动态置顶\",\n              method: () => {\n                this.$bus.$emit(\"applyTop\", {\n                  type: \"feed\",\n                  api: api.applyTopFeed,\n                  payload: this.feedID\n                });\n              }\n            },\n            {\n              text: \"删除动态\",\n              method: () => {\n                setTimeout(() => {\n                  const actionSheet = [\n                    {\n                      text: \"删除\",\n                      style: { color: \"#f4504d\" },\n                      method: () => {\n                        api.deleteFeed(this.feedID).then(() => {\n                          this.$Message.success(\"删除动态成功\");\n                          this.goBack();\n                        });\n                      }\n                    }\n                  ];\n                  this.$bus.$emit(\n                    \"actionSheet\",\n                    actionSheet,\n                    \"取消\",\n                    \"确认删除?\"\n                  );\n                }, 200);\n              }\n            }\n          ]\n        : [\n            {\n              text: \"举报\",\n              method: () => {\n                this.$Message.info(\"举报功能开发中，敬请期待\");\n              }\n            }\n          ];\n      this.$bus.$emit(\"actionSheet\", [...defaultActions, ...actions], \"取消\");\n    },\n    replyComment(uid, uname, commentId) {\n      // 是否是自己的评论\n      if (uid === this.CURRENTUSER.id) {\n        // 是否是自己文章的评论\n        const isOwner = uid === this.user.id;\n        const actionSheet = [\n          {\n            text: isOwner ? \"评论置顶\" : \"申请评论置顶\",\n            method: () => {\n              this.$bus.$emit(\"applyTop\", {\n                isOwner,\n                type: \"feedComment\",\n                api: api.applyTopFeedComment,\n                payload: { feedId: this.feedID, commentId },\n                callback: this.fetchFeedComments\n              });\n            }\n          },\n          { text: \"删除评论\", method: () => this.deleteComment(commentId) }\n        ];\n        this.$bus.$emit(\"actionSheet\", actionSheet, \"取消\");\n      } else {\n        this.$bus.$emit(\"commentInput\", {\n          placeholder: `回复： ${uname}`,\n          onOk: text => {\n            this.sendComment({ reply_user: uid, body: text });\n          }\n        });\n      }\n    },\n    sendComment({ reply_user: replyUser, body }) {\n      const params = {};\n      if (body && body.length > 0) {\n        params.body = body;\n        replyUser && (params[\"reply_user\"] = replyUser);\n        this.$http\n          .post(`/feeds/${this.feedID}/comments`, params, {\n            validateStatus: s => s === 201\n          })\n          .then(({ data: { comment } = { comment: {} } }) => {\n            this.$Message.success(\"评论成功\");\n            this.comments.unshift(comment);\n            this.commentCount += 1;\n            this.$bus.$emit(\"commentInput:close\", true);\n          })\n          .catch(() => {\n            this.$Message.error(\"评论失败\");\n            this.$bus.$emit(\"commentInput:close\", true);\n          });\n      } else {\n        this.$Message.error(\"评论内容不能为空\");\n      }\n    },\n    deleteComment(commentId) {\n      api.deleteFeedComment(this.feedID, commentId).then(() => {\n        this.fetchFeedComments();\n        this.commentCount -= 1;\n        this.$Message.success(\"删除评论成功\");\n      });\n    },\n    followUserByStatus(status) {\n      if (!status || this.fetchFollow) return;\n      this.fetchFollow = true;\n\n      followUserByStatus({\n        id: this.user.id,\n        status\n      }).then(follower => {\n        this.relation = follower;\n        this.fetchFollow = false;\n      });\n    },\n    onRefresh() {\n      this.fetchFeed(() => {\n        this.$refs.loadmore.topEnd();\n      });\n    },\n    onFileClick(paid_node) {\n      if (!paid_node || paid_node.paid !== false) return;\n\n      if (this.$lstore.hasData(\"H5_ACCESS_TOKEN\")) {\n        this.$bus.$emit(\"payfor\", {\n          nodeType: \"内容\",\n          node: paid_node.paid_node,\n          amount: paid_node.amount,\n          onSuccess: data => {\n            this.$Message.success(data);\n            this.feed.images = null;\n            this.fetchFeed();\n          }\n        });\n      } else {\n        this.$nextTick(() => {\n          const path = this.$route.fullPath;\n          this.$router.push({\n            path: \"/signin\",\n            query: { redirect: path }\n          });\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.feed-detail-video {\n  height: 100vw;\n  width: 100vw;\n  // object-fit: cover;\n  margin-left: -20px;\n  background: #000;\n}\n.m-art {\n  padding-top: 0.1rem;\n  padding-bottom: 0.1rem;\n}\n.m-art-head {\n  .m-avatar-box-def {\n    width: 52px;\n    height: 52px;\n  }\n}\n.username {\n  font-size: 0.32rem;\n  margin-left: 0.1rem;\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeedDetail.vue?vue&type=template&id=500756aa&scoped=true&\"\nimport script from \"./FeedDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./FeedDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FeedDetail.vue?vue&type=style&index=0&id=500756aa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"500756aa\",\n  null\n  \n)\n\ncomponent.options.__file = \"FeedDetail.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-feed\"},[_c('nav',{staticClass:\"m-box m-head-top m-lim-width m-pos-f m-main m-bb1\"},[_c('ul',{staticClass:\"m-box m-flex-grow1 m-aln-center m-justify-center m-flex-base0 m-head-nav\"},[_c('router-link',{attrs:{\"to\":{ name:'feeds', query: { type: 'new' } },\"tag\":\"li\",\"active-class\":\"active\",\"exact\":\"\",\"replace\":\"\"}},[_c('a',[_vm._v(\"最新\")])]),_c('router-link',{attrs:{\"to\":{ name:'feeds', query: { type: 'hot' } },\"tag\":\"li\",\"active-class\":\"active\",\"exact\":\"\",\"replace\":\"\"}},[_c('a',[_vm._v(\"热门\")])]),_c('router-link',{attrs:{\"to\":{ name:'feeds', query: { type: 'follow' } },\"tag\":\"li\",\"active-class\":\"active\",\"exact\":\"\",\"replace\":\"\"}},[_c('a',[_vm._v(\"关注\")])])],1)]),_c('jo-load-more',{ref:\"loadmore\",staticClass:\"p-feed-main\",attrs:{\"auto-load\":true},on:{\"onRefresh\":_vm.onRefresh,\"onLoadMore\":_vm.onLoadMore}},[(_vm.feedType === 'hot')?_c('banner-ad',{attrs:{\"type\":\"feed:hot\"}}):_vm._e(),_c('ul',{staticClass:\"p-feed-list\"},[_vm._l((_vm.pinned),function(feed,index){return (feed.id)?_c('li',{key:(\"pinned-feed-\" + _vm.feedType + \"-\" + (feed.id) + \"-\" + index)},[_c('feed-card',{attrs:{\"feed\":feed,\"pinned\":true}})],1):_vm._e()}),_vm._l((_vm.feeds),function(card,index){return _c('li',{key:(\"feed-\" + _vm.feedType + \"-\" + (card.id) + \"-\" + index)},[(card.user_id)?_c('feed-card',{attrs:{\"feed\":card}}):_vm._e(),(card.space_id)?_c('feed-ad-card',{attrs:{\"ad\":card}}):_vm._e()],1)})],2)],1),_c('foot-guide')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"m-box-model m-card\",attrs:{\"href\":_vm.ad.data.link}},[_c('div',{staticClass:\"m-box\"},[_c('avatar',{attrs:{\"user\":_vm.ad.data}}),_c('section',{staticClass:\"m-box-model m-flex-grow1 m-flex-shrink1 m-card-main\"},[_c('header',{staticClass:\"m-box m-aln-center m-justify-bet m-card-usr\"},[_c('h4',{staticClass:\"m-flex-grow1 m-flex-shrink1\"},[_vm._v(_vm._s(_vm.ad.data.name))]),_c('div',{staticClass:\"m-box m-aln-center\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.time,'MM-dd')))])])]),_c('article',{staticClass:\"m-card-body\"},[(_vm.ad.data.content.length > 0)?_c('div',{staticClass:\"m-card-con\"},[_c('p',{staticClass:\"m-text-box m-text-cut-3\"},[_vm._v(_vm._s(_vm.ad.data.content))]),_c('div',{staticClass:\"image\"},[_c('img',{attrs:{\"src\":_vm.ad.data.image}})])]):_vm._e()])])],1),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('footer',{staticClass:\"m-box-model m-card-foot m-bt1\"},[_c('div',{staticClass:\"m-box m-aln-center m-card-tools m-lim-width\"},[_c('span',{staticClass:\"advertise-badge\"},[_vm._v(\"广告\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <a\n    :href=\"ad.data.link\"\n    class=\"m-box-model m-card\">\n    <div class=\"m-box\">\n      <avatar :user=\"ad.data\" />\n      <section class=\"m-box-model m-flex-grow1 m-flex-shrink1 m-card-main\">\n        <header class=\"m-box m-aln-center m-justify-bet m-card-usr\">\n          <h4 class=\"m-flex-grow1 m-flex-shrink1\">{{ ad.data.name }}</h4>\n          <div class=\"m-box m-aln-center\">\n            <span>{{ time | formatDate('MM-dd') }}</span>\n          </div>\n        </header>\n        <article class=\"m-card-body\">\n          <div\n            v-if=\"ad.data.content.length > 0\"\n            class=\"m-card-con\">\n            <p class=\"m-text-box m-text-cut-3\">{{ ad.data.content }}</p>\n            <div class=\"image\">\n              <img :src=\"ad.data.image\">\n            </div>\n          </div>\n        </article>\n      </section>\n    </div>\n    <footer class=\"m-box-model m-card-foot m-bt1\">\n      <div class=\"m-box m-aln-center m-card-tools m-lim-width\">\n        <span class=\"advertise-badge\">广告</span>\n      </div>\n    </footer>\n  </a>\n</template>\n\n<script>\n/**\n * 模拟动态卡片广告\n */\n\nimport { timeOffset } from \"@/filters\";\n\nexport default {\n  name: \"FeedCard\",\n  props: {\n    ad: { type: Object, required: true }\n  },\n  computed: {\n    time() {\n      const { time } = this.ad.data || {};\n      return +new Date(time) - timeOffset;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.m-card {\n  padding: 30px 20px 0;\n  box-sizing: border-box;\n  background-color: #fff;\n\n  .m-card-usr {\n    font-size: 24px;\n    color: #ccc;\n    margin-bottom: 30px;\n    h4 {\n      color: #000;\n      font-size: 26px;\n    }\n    span + span {\n      margin-left: 15px;\n    }\n  }\n  .m-card-main {\n    margin-left: 20px;\n  }\n  .m-card-con {\n    overflow: hidden;\n    font-size: 30px;\n    line-height: 42px;\n    color: @text-color2;\n\n    .image {\n      margin-top: 12px;\n      img {\n        width: 518px;\n      }\n    }\n  }\n  .m-card-body {\n    > h2 {\n      font-size: 32px;\n      font-weight: bold;\n      margin-bottom: 20px;\n    }\n  }\n  .m-card-foot {\n    margin-top: 20px;\n    margin-left: -20px;\n    margin-right: -20px;\n    padding: 0 20px 0 120px;\n\n    .advertise-badge {\n      border: 1px solid #ededed;\n      padding: 2px 8px;\n    }\n  }\n  .m-card-tools {\n    padding: 30px 0;\n    color: #b3b3b3;\n    font-size: 24px;\n    a {\n      color: inherit;\n      + a {\n        margin-left: 60px;\n      }\n    }\n    span {\n      margin-left: 10px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedAdCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedAdCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeedAdCard.vue?vue&type=template&id=a7faf6c8&scoped=true&\"\nimport script from \"./FeedAdCard.vue?vue&type=script&lang=js&\"\nexport * from \"./FeedAdCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FeedAdCard.vue?vue&type=style&index=0&id=a7faf6c8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7faf6c8\",\n  null\n  \n)\n\ncomponent.options.__file = \"FeedAdCard.vue\"\nexport default component.exports","<template>\n  <div class=\"p-feed\">\n    <nav class=\"m-box m-head-top m-lim-width m-pos-f m-main m-bb1\">\n      <ul class=\"m-box m-flex-grow1 m-aln-center m-justify-center m-flex-base0 m-head-nav\">\n        <router-link\n          :to=\"{ name:'feeds', query: { type: 'new' } }\"\n          tag=\"li\"\n          active-class=\"active\"\n          exact\n          replace>\n          <a>最新</a>\n        </router-link>\n        <router-link\n          :to=\"{ name:'feeds', query: { type: 'hot' } }\"\n          tag=\"li\"\n          active-class=\"active\"\n          exact\n          replace>\n          <a>热门</a>\n        </router-link>\n        <router-link\n          :to=\"{ name:'feeds', query: { type: 'follow' } }\"\n          tag=\"li\"\n          active-class=\"active\"\n          exact\n          replace>\n          <a>关注</a>\n        </router-link>\n      </ul>\n    </nav>\n\n    <jo-load-more\n      ref=\"loadmore\"\n      :auto-load=\"true\"\n      class=\"p-feed-main\"\n      @onRefresh=\"onRefresh\"\n      @onLoadMore=\"onLoadMore\" >\n\n      <!-- 热门动态顶部 banner 广告位 -->\n      <banner-ad\n        v-if=\"feedType === 'hot'\"\n        type=\"feed:hot\"/>\n\n      <ul class=\"p-feed-list\">\n        <li\n          v-for=\"(feed, index) in pinned\"\n          v-if=\"feed.id\"\n          :key=\"`pinned-feed-${feedType}-${feed.id}-${index}`\">\n          <feed-card\n            :feed=\"feed\"\n            :pinned=\"true\" />\n        </li>\n        <li\n          v-for=\"(card, index) in feeds\"\n          :key=\"`feed-${feedType}-${card.id}-${index}`\">\n          <feed-card\n            v-if=\"card.user_id\"\n            :feed=\"card\" />\n          <feed-ad-card\n            v-if=\"card.space_id\"\n            :ad=\"card\"/>\n        </li>\n      </ul>\n    </jo-load-more>\n    <foot-guide/>\n  </div>\n</template>\n\n<script>\n/**\n * 动态列表\n * @typedef {{id: number, user, ...others}} FeedDetail\n */\n\nimport FeedCard from \"@/components/FeedCard/FeedCard.vue\";\nimport FeedAdCard from \"./components/FeedAdCard.vue\";\nimport BannerAd from \"@/components/advertisement/BannerAd.vue\";\nimport { noop } from \"@/util\";\n\nconst feedTypesMap = [\"new\", \"hot\", \"follow\"];\n\nexport default {\n  name: \"FeedList\",\n  components: { FeedCard, BannerAd, FeedAdCard },\n  data() {\n    return {};\n  },\n  computed: {\n    feedType() {\n      return this.$route.query.type;\n    },\n    feeds() {\n      return this.$store.getters[`feed/${this.feedType}`];\n    },\n    pinned() {\n      return this.$store.getters[\"feed/pinned\"];\n    },\n    after() {\n      const len = this.feeds.length;\n      if (!len) return 0;\n      if (this.feedType !== \"hot\") return this.feeds[len - 1].id; // after\n      return this.feeds[len - 1].hot; // offset\n    }\n  },\n  watch: {\n    feedType(val, oldVal) {\n      feedTypesMap.includes(val) &&\n        oldVal &&\n        this.$refs.loadmore.beforeRefresh();\n    }\n  },\n  created() {\n    this.$store.dispatch(\"feed/getAdvertise\");\n    this.onRefresh(noop);\n  },\n  methods: {\n    async onRefresh(callback) {\n      const type = this.feedType.replace(/^\\S/, s => s.toUpperCase());\n      const action = `feed/get${type}Feeds`;\n      const data = await this.$store.dispatch(action, { refresh: true });\n      callback(data.length < 15);\n    },\n    async onLoadMore(callback) {\n      const type = this.feedType.replace(/^\\S/, s => s.toUpperCase());\n      const action = `feed/get${type}Feeds`;\n      const data = await this.$store.dispatch(action, { after: this.after });\n      callback(data.length < 15);\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.p-feed {\n  .p-feed-main {\n    padding-top: 90px;\n  }\n\n  .p-feed-list > li + li {\n    margin-top: 20px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeedList.vue?vue&type=template&id=75b44dea&scoped=true&\"\nimport script from \"./FeedList.vue?vue&type=script&lang=js&\"\nexport * from \"./FeedList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FeedList.vue?vue&type=style&index=0&id=75b44dea&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"75b44dea\",\n  null\n  \n)\n\ncomponent.options.__file = \"FeedList.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedAdCard.vue?vue&type=style&index=0&id=a7faf6c8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedAdCard.vue?vue&type=style&index=0&id=a7faf6c8&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedList.vue?vue&type=style&index=0&id=75b44dea&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeedList.vue?vue&type=style&index=0&id=75b44dea&lang=less&scoped=true&\""],"sourceRoot":""}
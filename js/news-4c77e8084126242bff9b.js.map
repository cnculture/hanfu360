{"version":3,"sources":["webpack:///./src/page/news/NewsSearch.vue?0947","webpack:///src/page/news/NewsSearch.vue","webpack:///./src/page/news/NewsSearch.vue?7838","webpack:///./src/page/news/NewsSearch.vue","webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./src/page/news/NewsList.vue?af02","webpack:///./src/page/news/NewsList.vue?d447","webpack:///./src/page/news/components/AdCard.vue?b927","webpack:///src/page/news/components/AdCard.vue","webpack:///./src/page/news/components/AdCard.vue?da93","webpack:///./src/page/news/components/AdCard.vue","webpack:///./src/page/news/components/NewsFilter.vue?e686","webpack:///src/page/news/components/NewsFilter.vue","webpack:///./src/page/news/components/NewsFilter.vue?661f","webpack:///./src/page/news/components/NewsFilter.vue","webpack:///src/page/news/NewsList.vue","webpack:///./src/page/news/NewsList.vue?3fe7","webpack:///./src/page/news/NewsList.vue","webpack:///./src/page/news/NewsDetail.vue?849d","webpack:///src/page/news/NewsDetail.vue","webpack:///./src/page/news/NewsDetail.vue?2377","webpack:///./src/page/news/NewsDetail.vue","webpack:///./src/page/news/NewsSearch.vue?b5db","webpack:///./src/page/news/components/NewsFilter.vue?0eca","webpack:///./src/page/news/NewsDetail.vue?4920","webpack:///./src/page/news/NewsSearch.vue?89bc"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","model","value","callback","$$v","keywordOrigin","expression","ref","attrs","auto-load","show-bottom","list","length","on","onLoadMore","_l","news","key","id","_e","directives","name","rawName","_v","noResult","loading","keyword","staticRenderFns","NewsSearchvue_type_script_lang_js_","components","NewsCard","SearchBar","data","computed","after","len","trim","watch","searchNewsByKey","methods","lodash_default","a","debounce","_this","Object","then","_ref","$refs","loadmore","afterRefresh","api","_this2","_ref2","toConsumableArray","concat","afterLoadmore","news_NewsSearchvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","$export","__webpack_require__","$find","KEY","forced","Array","P","F","findIndex","callbackfn","arguments","undefined","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsList_vue_vue_type_style_index_0_id_1f072530_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsList_vue_vue_type_style_index_0_id_1f072530_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","slot","click","$event","$router","push","path","xlink:href","beforeCreatePost","change","onCateChange","class","guest","isLogin","onRefresh","type","card","current-cate","currentCate","ad","AdCardvue_type_template_id_7a92b91b_render","href","link","_s","title","_f","time","src","image","AdCardvue_type_template_id_7a92b91b_staticRenderFns","AdCardvue_type_script_lang_js_","extends","props","required","formatData","components_AdCardvue_type_script_lang_js_","AdCard","NewsFiltervue_type_template_id_69daf673_scoped_true_render","prefixCls","showAll","onOk","editing","showEditor","active","chooseCate","myCate","cate","NewsFiltervue_type_template_id_69daf673_scoped_true_staticRenderFns","NewsFiltervue_type_script_lang_js_","myCates","moreCates","val","mounted","fetchCates","follows","map","c","join","$http","patch","$emit","e","index","splice","index2","el","target","objectSpread","_fetchCates","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref$data","wrap","_context","prev","next","get","sent","my_cates","more_cates","stop","apply","components_NewsFiltervue_type_script_lang_js_","NewsFilter_component","NewsFilter","NewsListvue_type_script_lang_js_","BannerAd","newsList","vuex_esm","advertiseList","state","advertise","advertiseIndex","newsVerified","CONFIG","verified","userVerify","USER_VERIFY","user","$store","CURRENTUSER","keys","dispatch","beforeRefresh","_ref$id","_onRefresh","params","rand","commit","recommend","cate_id","Math","random","_x","_onLoadMore","_callee2","_context2","assign","_x2","noNeedVerify","isEmpty","status","$Message","error","actions","text","method","query","$bus","news_NewsListvue_type_script_lang_js_","NewsList_component","liked","can-oprate","audit_status","on-like","likeNews","on-share","shareNews","on-more","moreAction","on-comment","commentNews","from","subject","domProps","innerHTML","body","likeCount","likes","slice","style","zIndex","getAvatar","avatar","hits","rewardNews","reward","count","amount","currencyUnit","tag","to","append","rew","rewardList","staticStyle","fill","commentCount","comment","pinned","replyComment","stopPropagation","fetchNewsComments","maxComId","fetchComing","NewsDetailvue_type_script_lang_js_","ArticleCard","CommentItem","ArticleComment","DetailAd","oldID","fetching","comments","pinnedCom","noMoreCom","config","appid","signature","timestamp","noncestr","appList","share","desc","firstImage","images","defaults","baseURL","newsID","$route","userID","user_id","isMine","has_like","set","digg_count","comment_count","created_at","_this$news$category","category","_this$news$category$n","markdown","content","isWechat","BROWSER","has_collect","activated","fetchNews","setTimeout","deactivated","shareSuccess","success","shareCancel","util","fetchNewsLikes","fetchRewardInfo","fetchRewards","shareUrl","window","location","origin","substr","fullPath","signUrl","OS","initUrl","wechatShare","imgUrl","catch","back","_this3","_ref2$data","_this4","_ref3","_ref3$data","_ref3$data$pinneds","pinneds","_ref3$data$comments","pinnedIds","p","filter","indexOf","lenght","_this5","limit","_ref4","_ref4$data","_this6","_ref5","_ref5$data","_this7","payload","_this8","url","validateStatus","s","_this9","sendComment","_this10","defaultActions","info","uid","uname","commentId","_this11","isOwner","actionSheet","newsId","deleteComment","placeholder","reply_user","_ref6","_this12","replyUser","post","_this13","_this14","news_NewsDetailvue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsSearch_vue_vue_type_style_index_1_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsSearch_vue_vue_type_style_index_1_lang_less___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsFilter_vue_vue_type_style_index_0_id_69daf673_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsFilter_vue_vue_type_style_index_0_id_69daf673_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsDetail_vue_vue_type_style_index_0_id_693cc383_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsDetail_vue_vue_type_style_index_0_id_693cc383_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsSearch_vue_vue_type_style_index_0_id_701ebe3a_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NewsSearch_vue_vue_type_style_index_0_id_701ebe3a_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/news-4c77e8084126242bff9b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-news-search\"},[_c('search-bar',{model:{value:(_vm.keywordOrigin),callback:function ($$v) {_vm.keywordOrigin=$$v},expression:\"keywordOrigin\"}}),_c('jo-load-more',{ref:\"loadmore\",attrs:{\"auto-load\":false,\"show-bottom\":_vm.list.length > 0},on:{\"onLoadMore\":_vm.onLoadMore}},_vm._l((_vm.list),function(news){return (news.id)?_c('news-card',{key:news.id,attrs:{\"news\":news}}):_vm._e()})),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"load-more-ph m-text-c mt10\"},[_vm._v(\"正在搜索...\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noResult && !_vm.loading && _vm.keyword && !_vm.list.length),expression:\"noResult && !loading && keyword && !list.length\"}],staticClass:\"placeholder m-no-find\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"p-news-search\">\n\n    <search-bar v-model=\"keywordOrigin\" />\n\n    <jo-load-more\n      ref=\"loadmore\"\n      :auto-load=\"false\"\n      :show-bottom=\"list.length > 0\"\n      @onLoadMore=\"onLoadMore\">\n      <news-card\n        v-for=\"news in list\"\n        v-if=\"news.id\"\n        :key=\"news.id\"\n        :news=\"news\" />\n    </jo-load-more>\n    <p v-show=\"loading\" class=\"load-more-ph m-text-c mt10\">正在搜索...</p>\n    <div v-show=\"noResult && !loading && keyword && !list.length\" class=\"placeholder m-no-find\"/>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nimport SearchBar from \"@/components/common/SearchBar.vue\";\nimport NewsCard from \"./components/NewsCard.vue\";\nimport { searchNewsByKey } from \"@/api/news.js\";\nimport { limit } from \"@/api\";\n\nexport default {\n  name: \"NewsSearch\",\n  components: {\n    NewsCard,\n    SearchBar\n  },\n  data() {\n    return {\n      keywordOrigin: \"\",\n      list: [],\n      loading: false,\n      noResult: false\n    };\n  },\n  computed: {\n    after() {\n      const len = this.list.length;\n      return len > 0 ? this.list[len - 1].id : 0;\n    },\n    keyword() {\n      return this.keywordOrigin.trim();\n    }\n  },\n  watch: {\n    keyword() {\n      this.searchNewsByKey();\n    }\n  },\n  methods: {\n    /**\n     * 使用 lodash.debounce 防抖，每输入 600ms 后执行\n     * 不要使用箭头函数，会导致 this 作用域丢失\n     * @author mutoe <mutoe@foxmail.com>\n     */\n    searchNewsByKey: _.debounce(function() {\n      if (!this.keyword) return;\n      this.loading = true;\n      searchNewsByKey(this.keyword).then(({ data: list }) => {\n        this.loading = false;\n        this.list = list;\n        this.$refs.loadmore.afterRefresh(list.length < limit);\n        if (!list.length) this.noResult = true;\n      });\n    }, 600),\n    onLoadMore() {\n      searchNewsByKey(this.keyword, limit, this.after).then(\n        ({ data: list }) => {\n          this.list = [...this.list, ...list];\n          this.$refs.loadmore.afterLoadmore(list.length < limit);\n        }\n      );\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.p-news-search {\n  height: ~\"calc(100% - 90px)\";\n\n  .m-head-top-title {\n    padding: 0 20px 0 0;\n\n    .m-search-box {\n      width: 100%;\n    }\n  }\n\n  .placeholder {\n    width: 100%;\n    height: 100%;\n  }\n}\n</style>\n\n<style lang=\"less\">\n.jo-loadmore-head {\n  top: 0px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsSearch.vue?vue&type=template&id=701ebe3a&scoped=true&\"\nimport script from \"./NewsSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsSearch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewsSearch.vue?vue&type=style&index=0&id=701ebe3a&lang=less&scoped=true&\"\nimport style1 from \"./NewsSearch.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"701ebe3a\",\n  null\n  \n)\n\ncomponent.options.__file = \"NewsSearch.vue\"\nexport default component.exports","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsList.vue?vue&type=style&index=0&id=1f072530&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsList.vue?vue&type=style&index=0&id=1f072530&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-news\"},[_c('common-header',{staticClass:\"common-header\"},[_vm._v(\"\\n    资讯\\n    \"),_c('template',{slot:\"right\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\",on:{\"click\":function($event){_vm.$router.push({path: '/news/search'})}}},[_c('use',{attrs:{\"xlink:href\":\"#icon-search\"}})]),_c('svg',{staticClass:\"m-style-svg m-svg-def\",on:{\"click\":_vm.beforeCreatePost}},[_c('use',{attrs:{\"xlink:href\":\"#icon-news-draft\"}})])])],2),(_vm.isLogin)?_c('news-filter',{on:{\"change\":_vm.onCateChange}}):_vm._e(),_c('jo-load-more',{ref:\"loadmore\",staticClass:\"loadmore\",class:{guest: !_vm.isLogin},on:{\"onRefresh\":_vm.onRefresh,\"onLoadMore\":_vm.onLoadMore}},[_c('banner-ad',{attrs:{\"type\":\"news\"}}),_vm._l((_vm.list),function(card){return [(card.author)?_c('news-card',{key:(\"news\" + (card.id)),attrs:{\"current-cate\":_vm.currentCate,\"news\":card}}):_vm._e(),(card.space_id)?_c('ad-card',{key:(\"ad\" + (card.id)),attrs:{\"ad\":card}}):_vm._e()]})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"news-card\",attrs:{\"href\":_vm.ad.data.link}},[_c('section',{staticClass:\"body\"},[_c('h2',[_vm._v(_vm._s(_vm.ad.data.title))]),_c('p',[_c('i',{staticClass:\"news-cate\"},[_vm._v(\"广告\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.ad.data.time,'MM-dd')))])])]),(_vm.ad.data.image)?_c('div',{staticClass:\"poster\"},[_c('img',{attrs:{\"src\":_vm.ad.data.image}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a\n    :href=\"ad.data.link\"\n    class=\"news-card\">\n    <section class=\"body\">\n      <h2>{{ ad.data.title }}</h2>\n      <p>\n        <i class=\"news-cate\">广告</i>\n        <span>{{ ad.data.time | formatDate('MM-dd') }}</span>\n      </p>\n    </section>\n    <div\n      v-if=\"ad.data.image\"\n      class=\"poster\">\n      <img :src=\"ad.data.image\">\n    </div>\n  </a>\n</template>\n\n<script>\nimport NewsCard from \"./NewsCard.vue\";\n\nexport default {\n  name: \"AdCard\",\n  extends: NewsCard,\n  props: {\n    ad: { type: Object, required: true }\n  },\n  methods: {\n    formatData() {} // please keep it exist because it extended NewsCard.vue and mounted this method.\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdCard.vue?vue&type=template&id=7a92b91b&\"\nimport script from \"./AdCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AdCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"AdCard.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.prefixCls, {showAll: _vm.showAll}]},[_c('div',{class:(_vm.prefixCls + \"--head\")},[_c('span',[_vm._v(\"点击以编辑\")]),_c('div',[_c('button',{on:{\"click\":_vm.onOk}},[_vm._v(_vm._s(_vm.editing ? '完成' : '编辑'))]),_c('button',{on:{\"click\":_vm.showEditor}},[_vm._v(\"收起\")])])]),_c('div',{class:(_vm.prefixCls + \"--list__wrap\")},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.showAll),expression:\"!showAll\"}],class:(_vm.prefixCls + \"--switch\"),on:{\"click\":_vm.showEditor}},[_c('svg',[_c('use',{attrs:{\"xlink:href\":\"#icon-arrow-right\"}})])]),_c('span',{class:(_vm.prefixCls + \"--list__label\")},[_vm._v(\"我的订阅\")]),_c('div',{class:[(_vm.prefixCls + \"--list\"), { editing: _vm.editing }]},[_c('div',{class:[(_vm.prefixCls + \"--list__item\"), { active: ~~(_vm.currentCate.id) === 0 }],on:{\"click\":function($event){_vm.chooseCate($event, {id: 0, name:'推荐'})}}},[_vm._v(\"推荐\")]),_vm._l((_vm.myCates),function(myCate){return _c('div',{key:(\"myCate-\" + (myCate.id)),class:[(_vm.prefixCls + \"--list__item\"), { active: myCate.id === _vm.currentCate.id }],on:{\"click\":function($event){_vm.chooseCate($event, myCate)}}},[_vm._v(_vm._s(myCate.name))])})],2)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAll),expression:\"showAll\"}],class:(_vm.prefixCls + \"--list__wrap\")},[_c('span',{class:(_vm.prefixCls + \"--list__label\")},[_vm._v(\"更多订阅\")]),_c('div',{class:(_vm.prefixCls + \"--list\")},_vm._l((_vm.moreCates),function(cate){return _c('div',{key:(\"moreCate-\" + (cate.id)),class:[(_vm.prefixCls + \"--list__item\")],on:{\"click\":function($event){_vm.chooseCate($event, cate)}}},[_vm._v(_vm._s(cate.name))])}))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"[prefixCls, {showAll}]\">\n    <div :class=\"`${prefixCls}--head`\">\n      <span>点击以编辑</span>\n      <div>\n        <button @click=\"onOk\">{{ editing ? '完成' : '编辑' }}</button>\n        <button @click=\"showEditor\">收起</button>\n      </div>\n    </div>\n    <div :class=\"`${prefixCls}--list__wrap`\">\n      <div\n        v-show=\"!showAll\"\n        :class=\"`${prefixCls}--switch`\"\n        @click=\"showEditor\">\n        <svg>\n          <use xlink:href=\"#icon-arrow-right\"/>\n        </svg>\n      </div>\n      <span :class=\"`${prefixCls}--list__label`\">我的订阅</span>\n      <div :class=\"[`${prefixCls}--list`, { editing }]\">\n        <div :class=\"[`${prefixCls}--list__item`, { active: ~~(currentCate.id) === 0 }]\" @click=\"chooseCate($event, {id: 0, name:'推荐'})\" >推荐</div>\n        <div\n          v-for=\"myCate in myCates\"\n          :class=\"[`${prefixCls}--list__item`, { active: myCate.id === currentCate.id }]\"\n          :key=\"`myCate-${myCate.id}`\"\n          @click=\"chooseCate($event, myCate)\">{{ myCate.name }}</div>\n      </div>\n    </div>\n    <div v-show=\"showAll\" :class=\"`${prefixCls}--list__wrap`\">\n      <span :class=\"`${prefixCls}--list__label`\">更多订阅</span>\n      <div :class=\"`${prefixCls}--list`\">\n        <div\n          v-for=\"cate in moreCates\"\n          :class=\"[`${prefixCls}--list__item`]\"\n          :key=\"`moreCate-${cate.id}`\"\n          @click=\"chooseCate($event, cate)\">{{ cate.name }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst prefixCls = \"news__filter\";\nexport default {\n  name: \"NewsFilter\",\n  data() {\n    return {\n      prefixCls,\n      editing: false,\n      showAll: false,\n\n      myCates: [],\n      moreCates: [],\n\n      currentCate: {\n        id: 0,\n        name: \"推荐\"\n      }\n    };\n  },\n\n  watch: {\n    editing() {},\n    showAll(val) {\n      !val && (this.editing = !1);\n    }\n  },\n\n  mounted() {\n    this.fetchCates();\n  },\n  methods: {\n    showEditor() {\n      this.showAll = !this.showAll;\n    },\n    onOk() {\n      if (this.editing) {\n        this.editing = false;\n        const follows = this.myCates.map(c => c.id).join(\",\");\n        this.$http.patch(\"/news/categories/follows\", {\n          follows\n        });\n        this.showAll = false;\n        this.$emit(\"onOk\", this.myCates);\n      } else {\n        this.editing = true;\n      }\n    },\n    chooseCate(e, cate) {\n      if (this.showAll) {\n        if (this.editing) {\n          const index = this.myCates.findIndex(c => c.id === cate.id);\n          if (index > -1) {\n            this.moreCates.push(cate);\n            this.myCates.splice(index, 1);\n          } else {\n            const index2 = this.moreCates.findIndex(c => c.id === cate.id);\n            this.myCates.push(cate);\n            this.moreCates.splice(index2, 1);\n          }\n        } else {\n          this.editing = true;\n        }\n      } else {\n        if (cate.id !== this.currentCate.id) {\n          const { target: el } = e;\n          this.currentCate = { ...cate, el };\n          this.$emit(\"change\", this.currentCate);\n        }\n      }\n    },\n    async fetchCates() {\n      const {\n        data: { my_cates: myCates, more_cates: moreCates } = {}\n      } = await this.$http.get(\"/news/cates\");\n      this.myCates = myCates ? [...myCates] : [];\n      this.moreCates = moreCates ? [...moreCates] : [];\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.news__filter {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 90px;\n  z-index: 9;\n  background-color: #fff;\n  padding-top: 0 !important;\n  min-height: 80px;\n  max-height: 80px;\n  font-size: 28px;\n  overflow: hidden;\n  transform: max-height 0.3s ease;\n  border-bottom: 1px solid #ededed;\n  transform: translate3d(0, 0, 0);\n  &--head {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 30px;\n    height: 80px;\n    background-color: #f4f5f5;\n    display: none;\n    button {\n      padding: 0;\n      display: inline;\n      outline: 0;\n      border: 0;\n      background-color: inherit;\n      color: @primary;\n      margin-left: 60px;\n    }\n  }\n\n  &--switch {\n    width: 80px;\n    height: 78px;\n    position: fixed;\n    top: 0;\n    right: 0;\n    z-index: 2;\n    background: linear-gradient(\n      to right,\n      rgba(255, 255, 255, 0.1) 0,\n      white 40%,\n      white\n    );\n    svg {\n      width: 24px;\n      height: 24px;\n      color: #999;\n      margin-left: (80-24) * 2/3px;\n      vertical-align: middle;\n      transform: rotate(90deg);\n    }\n  }\n\n  &--list {\n    display: flex;\n    flex-wrap: nowrap;\n    align-items: center;\n    overflow-x: auto;\n    margin-left: -50/2px;\n    margin-right: -50/2px;\n    -webkit-overflow-scrolling: touch;\n    &::-webkit-scrollbar-thumb,\n    &::-webkit-scrollbar {\n      width: 0;\n    }\n    &__wrap {\n      padding: 0 25px;\n      width: 100%;\n      height: 80px;\n      line-height: 80px;\n    }\n    &__label {\n      display: none;\n      color: #999;\n    }\n\n    &__item {\n      cursor: pointer;\n      flex: 0 0 auto;\n      margin-left: 50/2px;\n      margin-right: 50/2px;\n      color: #999;\n      position: relative;\n      &:not(:first-child):after {\n        content: \"×\";\n        font-size: 16px; /*no*/\n        color: #999;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-left: -15px;\n        margin-top: -15px;\n        width: 30px;\n        height: 30px;\n        border-radius: 100%;\n        background-color: rgba(127, 127, 127, 0.1);\n        position: absolute;\n        left: 0;\n        top: 0;\n        transform: scale(0);\n        transition: transform 0.2s ease;\n      }\n      &.active {\n        color: #333;\n        font-size: 30px;\n      }\n\n      &:last-child {\n        padding-right: 80px;\n      }\n    }\n  }\n\n  &.showAll {\n    max-height: 100%;\n    bottom: 0;\n  }\n\n  .showAll & {\n    &--head {\n      display: flex;\n    }\n    &--list {\n      display: flex;\n      flex-wrap: wrap;\n      align-items: center;\n      margin-top: 30px;\n      margin-left: -15px;\n      margin-right: -15px;\n      &__label {\n        display: block;\n      }\n      &__item {\n        margin: 30/2px;\n        width: calc(~\"25% - \" 30px);\n        height: 60px;\n        line-height: 60px;\n        text-align: center;\n        border-radius: 8px;\n        background-color: #f4f5f5;\n        padding: 0;\n      }\n      &__wrap {\n        margin-top: 60px;\n        padding: 0 30px;\n        width: 100%;\n        height: auto;\n        line-height: 1;\n      }\n    }\n  }\n\n  .editing &--list__item {\n    &:after {\n      transform: scale(1);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsFilter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsFilter.vue?vue&type=template&id=69daf673&scoped=true&\"\nimport script from \"./NewsFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsFilter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewsFilter.vue?vue&type=style&index=0&id=69daf673&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69daf673\",\n  null\n  \n)\n\ncomponent.options.__file = \"NewsFilter.vue\"\nexport default component.exports","<template>\n  <div class=\"p-news\">\n\n    <common-header class=\"common-header\">\n      资讯\n      <template slot=\"right\">\n        <svg class=\"m-style-svg m-svg-def\" @click=\"$router.push({path: '/news/search'})\">\n          <use xlink:href=\"#icon-search\"/>\n        </svg>\n        <svg class=\"m-style-svg m-svg-def\" @click=\"beforeCreatePost\">\n          <use xlink:href=\"#icon-news-draft\"/>\n        </svg>\n      </template>\n    </common-header>\n\n    <news-filter v-if=\"isLogin\" @change=\"onCateChange\"/>\n\n    <jo-load-more\n      ref=\"loadmore\"\n      :class=\"{guest: !isLogin}\"\n      class=\"loadmore\"\n      @onRefresh=\"onRefresh\"\n      @onLoadMore=\"onLoadMore\">\n\n      <!-- 资讯顶部 banner 广告位 -->\n      <banner-ad type=\"news\"/>\n\n      <template v-for=\"card in list\" >\n        <news-card\n          v-if=\"card.author\"\n          :key=\"`news${card.id}`\"\n          :current-cate=\"currentCate\"\n          :news=\"card\" />\n        <ad-card\n          v-if=\"card.space_id\"\n          :key=\"`ad${card.id}`\"\n          :ad=\"card\"/>\n      </template>\n    </jo-load-more>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nimport { mapState } from \"vuex\";\nimport NewsCard from \"./components/NewsCard.vue\";\nimport AdCard from \"./components/AdCard.vue\";\nimport NewsFilter from \"./components/NewsFilter.vue\";\nimport BannerAd from \"@/components/advertisement/BannerAd.vue\";\n\nexport default {\n  name: \"NewsList\",\n  components: {\n    NewsCard,\n    AdCard,\n    NewsFilter,\n    BannerAd\n  },\n  data() {\n    return {\n      list: [], // 混合列表\n      currentCate: 0,\n      newsList: [] // 资讯列表\n    };\n  },\n  computed: {\n    ...mapState({\n      advertiseList: state => state.news.advertise.list,\n      advertiseIndex: state => state.news.advertise.index,\n      newsVerified: state => state.CONFIG[\"news:contribute\"].verified,\n      userVerify: state => state.USER_VERIFY || {}\n    }),\n    after() {\n      const len = this.newsList.length;\n      return len > 0 ? this.newsList[len - 1].id : 0;\n    },\n    isLogin() {\n      const user = this.$store.state.CURRENTUSER;\n      return Object.keys(user).length;\n    }\n  },\n  mounted() {\n    this.$store.dispatch(\"news/getAdvertise\");\n    if (!this.newsList.length) this.$refs.loadmore.beforeRefresh();\n    if (this.newsVerified) this.$store.dispatch(\"FETCH_USER_VERIFY\");\n  },\n  methods: {\n    onCateChange({ id = 0 } = {}) {\n      this.newsList = [];\n      this.currentCate = id;\n      this.$refs.loadmore.beforeRefresh();\n    },\n    async onRefresh(callback) {\n      this.$store.commit(\"news/RESET_ADVERTISE\");\n      // GET /news\n      const params =\n        this.currentCate === 0\n          ? { recommend: 1 }\n          : { cate_id: this.currentCate };\n      const data = await this.$store.dispatch(\"news/getNewsList\", params);\n      this.newsList = data;\n      callback(data.length < 10);\n\n      // 如果有广告,并且还没插入完,从广告栈顶取出一条随机插入列表\n      if (this.advertiseIndex < this.advertiseList.length) {\n        let rand = ~~(Math.random() * 9) + 1;\n        rand > data.length && (rand = data.length);\n        data.splice(rand, 0, this.advertiseList[this.advertiseIndex]);\n        this.$store.commit(\"news/POPUP_ADVERTISE\");\n      }\n\n      this.list = data;\n    },\n    async onLoadMore(callback) {\n      const params =\n        this.currentCate === 0\n          ? { recommend: 1 }\n          : { cate_id: this.currentCate };\n      Object.assign(params, { after: this.after });\n      const data = await this.$store.dispatch(\"news/getNewsList\", params);\n      callback(data.length < 10);\n\n      // 如果有广告,并且还没插入完,从广告栈顶取出一条随机插入列表\n      if (this.advertiseIndex < this.advertiseList.length) {\n        let rand = ~~(Math.random() * 9) + 1;\n        rand > data.length && (rand = data.length);\n        data.splice(rand, 0, this.advertiseList[this.advertiseIndex]);\n        this.$store.commit(\"news/POPUP_ADVERTISE\");\n      }\n\n      this.list = [...this.list, ...data];\n    },\n    /**\n     * 投稿前进行认证确认\n     */\n    beforeCreatePost() {\n      // 如果后台设置了不需要验证 或 用户已经认证就直接跳转\n      const noNeedVerify =\n        !this.$store.state.CONFIG[\"news:contribute\"].verified ||\n        !_.isEmpty(this.$store.state.CURRENTUSER.verified);\n      if (noNeedVerify) return this.$router.push({ path: \"/post/release\" });\n      else if (this.userVerify.status === 0) {\n        this.$Message.error(\"您的认证正在等待审核，通过审核后可发布帖子\");\n      } else {\n        const actions = [\n          {\n            text: \"个人认证\",\n            method: () =>\n              this.$router.push({\n                path: \"/profile/certificate\",\n                query: { type: \"user\" }\n              })\n          },\n          {\n            text: \"企业认证\",\n            method: () =>\n              this.$router.push({\n                path: \"/profile/certificate\",\n                query: { type: \"org\" }\n              })\n          }\n        ];\n        this.$bus.$emit(\n          \"actionSheet\",\n          actions,\n          \"取消\",\n          \"认证用户才能创建投稿，去认证？\"\n        );\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.p-news {\n  .common-header {\n    position: fixed;\n  }\n\n  .loadmore {\n    padding-top: 90+80px;\n\n    &.guest {\n      padding-top: 90px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsList.vue?vue&type=template&id=1f072530&scoped=true&\"\nimport script from \"./NewsList.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewsList.vue?vue&type=style&index=0&id=1f072530&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f072530\",\n  null\n  \n)\n\ncomponent.options.__file = \"NewsList.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article-card',{attrs:{\"liked\":_vm.liked,\"loading\":_vm.loading,\"can-oprate\":_vm.news.audit_status===0},on:{\"on-like\":_vm.likeNews,\"on-share\":_vm.shareNews,\"on-more\":_vm.moreAction,\"on-comment\":_vm.commentNews}},[_c('common-header',{attrs:{\"slot\":\"head\"},slot:\"head\"},[_vm._v(\"资讯详情\")]),_c('jo-load-more',{ref:\"loadmore\",attrs:{\"auto-load\":false,\"show-bottom\":false},on:{\"onRefresh\":_vm.onRefresh}},[_c('div',{staticClass:\"m-flex-shrink1 m-flex-grow1 m-art m-main\"},[_c('section',{staticClass:\"m-art-head\"},[_c('h1',[_vm._v(_vm._s(_vm.news.title))]),_c('p',[_c('i',{staticClass:\"m-art-cate\"},[_vm._v(_vm._s(_vm.cate))]),_c('span',[_vm._v(\"来自 \"+_vm._s(_vm.news.from || '原创'))])])]),(_vm.news.subject)?_c('p',{staticClass:\"m-art-subject\"},[_vm._v(_vm._s(_vm.news.subject))]):_vm._e(),_c('div',{staticClass:\"m-art-body markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.body)}}),_c('div',{staticClass:\"m-box m-aln-center m-justify-bet m-art-foot\"},[_c('div',{staticClass:\"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list\"},[(_vm.likeCount > 0 && _vm.news.audit_status===0)?[_c('ul',{staticClass:\"m-box m-flex-grow0 m-flex-shrink0\"},_vm._l((_vm.likes.slice(0, 5)),function(ref,index){\nvar user = ref.user;\nvar id = ref.id;\nreturn _c('li',{key:id,staticClass:\"m-avatar-box tiny\",style:({ zIndex: 5-index })},[_c('img',{attrs:{\"src\":_vm.getAvatar(user.avatar)}})])})),_c('span',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.likeCount))+\"人点赞\")])]:_vm._e()],2),_c('div',{staticClass:\"m-box-model m-aln-end m-art-info\"},[_c('span',[_vm._v(\"发布于\"+_vm._s(_vm._f(\"time2tips\")(_vm.time)))]),_c('span',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.news.hits || 0))+\"浏览\")])])]),_c('div',{staticClass:\"m-box-model m-box-center m-box-center-a m-art-reward\"},[_c('button',{staticClass:\"m-art-rew-btn\",on:{\"click\":_vm.rewardNews}},[_vm._v(\"打 赏\")]),_c('p',{staticClass:\"m-art-rew-label\"},[_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.reward.count)))]),_vm._v(\"人打赏，共\\n          \"),_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(_vm._s(_vm._f(\"formatNum\")(~~_vm.reward.amount)))]),_vm._v(_vm._s(_vm.currencyUnit)+\"\\n        \")]),_c('router-link',{staticClass:\"m-box m-aln-center m-art-rew-list\",attrs:{\"tag\":\"ul\",\"to\":\"rewarders\",\"append\":\"\"}},[_vm._l((_vm.rewardList),function(rew){return _c('li',{key:rew.id,staticClass:\"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny\",class:(\"m-avatar-box-\" + (rew.user.sex))},[_c('img',{attrs:{\"src\":_vm.getAvatar(rew.user.avatar)}})])}),(_vm.rewardList.length > 0)?_c('li',{staticClass:\"m-box m-aln-center\"},[_c('svg',{staticClass:\"m-style-svg m-svg-def\",staticStyle:{\"fill\":\"#bfbfbf\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-arrow-right\"}})])]):_vm._e()],2)],1)]),_c('detail-ad',{attrs:{\"type\":\"news\"}}),_c('div',{staticClass:\"m-box-model m-art-comments\"},[_c('ul',{staticClass:\"m-box m-aln-center m-art-comments-tabs\"},[_c('li',[_vm._v(_vm._s(_vm._f(\"formatNum\")(_vm.commentCount))+\"条评论\")])]),(_vm.news.audit_status === 0)?[_vm._l((_vm.pinnedCom),function(comment){return _c('comment-item',{key:(\"pinned-\" + (comment.id)),attrs:{\"comment\":comment,\"pinned\":true},on:{\"click\":_vm.replyComment}})}),_vm._l((_vm.comments),function(comment){return _c('comment-item',{key:(\"comment-\" + (comment.id)),attrs:{\"comment\":comment},on:{\"click\":_vm.replyComment}})}),_c('div',{staticClass:\"m-box m-aln-center m-justify-center load-more-box\"},[(_vm.noMoreCom)?_c('span',{staticClass:\"load-more-ph\"},[_vm._v(\"---没有更多---\")]):_c('span',{staticClass:\"load-more-btn\",on:{\"click\":function($event){$event.stopPropagation();_vm.fetchNewsComments(_vm.maxComId)}}},[_vm._v(\"\\n            \"+_vm._s(_vm.fetchComing ? \"加载中...\" : \"点击加载更多\")+\"\\n          \")])])]:_vm._e()],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <article-card\n    :liked=\"liked\"\n    :loading=\"loading\"\n    :can-oprate=\"news.audit_status===0\"\n    @on-like=\"likeNews\"\n    @on-share=\"shareNews\"\n    @on-more=\"moreAction\"\n    @on-comment=\"commentNews\">\n\n    <common-header slot=\"head\">资讯详情</common-header>\n\n    <jo-load-more\n      ref=\"loadmore\"\n      :auto-load=\"false\"\n      :show-bottom=\"false\"\n      @onRefresh=\"onRefresh\">\n      <div class=\"m-flex-shrink1 m-flex-grow1 m-art m-main\">\n        <section class=\"m-art-head\">\n          <h1>{{ news.title }}</h1>\n          <p>\n            <i class=\"m-art-cate\">{{ cate }}</i>\n            <span>来自 {{ news.from || '原创' }}</span>\n          </p>\n        </section>\n        <p v-if=\"news.subject\" class=\"m-art-subject\">{{ news.subject }}</p>\n        <div class=\"m-art-body markdown-body\" v-html=\"body\"/>\n        <div class=\"m-box m-aln-center m-justify-bet m-art-foot\">\n          <div class=\"m-flex-grow1 m-flex-shrink1 m-box m-aln-center m-art-like-list\">\n            <template v-if=\"likeCount > 0 && news.audit_status===0\">\n              <ul class=\"m-box m-flex-grow0 m-flex-shrink0\">\n                <li\n                  v-for=\"({user, id}, index) in likes.slice(0, 5)\"\n                  :key=\"id\"\n                  :style=\"{ zIndex: 5-index }\"\n                  class=\"m-avatar-box tiny\">\n                  <img :src=\"getAvatar(user.avatar)\">\n                </li>\n              </ul>\n              <span>{{ likeCount | formatNum }}人点赞</span>\n            </template>\n          </div>\n          <div class=\"m-box-model m-aln-end m-art-info\">\n            <span>发布于{{ time | time2tips }}</span>\n            <span>{{ news.hits || 0 | formatNum }}浏览</span>\n          </div>\n        </div>\n        <div class=\"m-box-model m-box-center m-box-center-a m-art-reward\">\n          <button class=\"m-art-rew-btn\" @click=\"rewardNews\">打 赏</button>\n          <p class=\"m-art-rew-label\">\n            <a href=\"javascript:;\">{{ reward.count | formatNum }}</a>人打赏，共\n            <a href=\"javascript:;\">{{ ~~reward.amount | formatNum }}</a>{{ currencyUnit }}\n          </p>\n          <router-link\n            tag=\"ul\"\n            to=\"rewarders\"\n            append\n            class=\"m-box m-aln-center m-art-rew-list\">\n            <li\n              v-for=\"rew in rewardList\"\n              :key=\"rew.id\"\n              :class=\"`m-avatar-box-${rew.user.sex}`\"\n              class=\"m-flex-grow0 m-flex-shrink0 m-art-rew m-avatar-box tiny\">\n              <img :src=\"getAvatar(rew.user.avatar)\">\n            </li>\n            <li v-if=\"rewardList.length > 0\" class=\"m-box m-aln-center\">\n              <svg class=\"m-style-svg m-svg-def\" style=\"fill:#bfbfbf\">\n                <use xlink:href=\"#icon-arrow-right\"/>\n              </svg>\n            </li>\n          </router-link>\n        </div>\n      </div>\n\n      <!-- 资讯详情页广告位 -->\n      <detail-ad type=\"news\"/>\n\n      <div class=\"m-box-model m-art-comments\">\n        <ul class=\"m-box m-aln-center m-art-comments-tabs\">\n          <li>{{ commentCount | formatNum }}条评论</li>\n        </ul>\n        <template v-if=\"news.audit_status === 0\">\n          <comment-item\n            v-for=\"(comment) in pinnedCom\"\n            :key=\"`pinned-${comment.id}`\"\n            :comment=\"comment\"\n            :pinned=\"true\"\n            @click=\"replyComment\" />\n          <comment-item\n            v-for=\"(comment) in comments\"\n            :key=\"`comment-${comment.id}`\"\n            :comment=\"comment\"\n            @click=\"replyComment\" />\n          <div class=\"m-box m-aln-center m-justify-center load-more-box\">\n            <span v-if=\"noMoreCom\" class=\"load-more-ph\">---没有更多---</span>\n            <span\n              v-else\n              class=\"load-more-btn\"\n              @click.stop=\"fetchNewsComments(maxComId)\">\n              {{ fetchComing ? \"加载中...\" : \"点击加载更多\" }}\n            </span>\n          </div>\n        </template>\n      </div>\n    </jo-load-more>\n  </article-card>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport ArticleCard from \"@/page/article/ArticleCard.vue\";\nimport CommentItem from \"@/page/article/ArticleComment.vue\";\nimport DetailAd from \"@/components/advertisement/DetailAd.vue\";\nimport wechatShare from \"@/util/wechatShare.js\";\nimport md from \"@/util/markdown.js\";\nimport { limit } from \"@/api\";\nimport * as api from \"@/api/news.js\";\nimport { noop } from \"@/util\";\n\nexport default {\n  name: \"NewsDetail\",\n  components: {\n    ArticleCard,\n    CommentItem,\n    DetailAd\n  },\n  data() {\n    return {\n      oldID: 0,\n      news: {},\n      loading: true,\n      fetching: false,\n\n      likes: [],\n      comments: [],\n      rewardList: [],\n      reward: {\n        count: 0,\n        amount: 0\n      },\n      pinnedCom: [],\n\n      fetchComing: false,\n      noMoreCom: false,\n      maxComId: 0,\n      config: {\n        appid: \"\",\n        signature: \"\",\n        timestamp: \"\",\n        noncestr: \"\"\n      },\n      appList: [\n        \"onMenuShareQZone\",\n        \"onMenuShareQQ\",\n        \"onMenuShareAppMessage\",\n        \"onMenuShareTimeline\"\n      ],\n      share: {\n        title: \"\",\n        desc: \"\",\n        link: \"\"\n      }\n    };\n  },\n  computed: {\n    ...mapState([\"CURRENTUSER\"]),\n    firstImage() {\n      let images = this.news.image;\n      if (!Object.keys(images).length) {\n        return \"\";\n      }\n      return (\n        this.$http.defaults.baseURL + \"/files/\" + images.id + \"?w=300&h=300\"\n      );\n    },\n    newsID() {\n      return this.$route.params.newsID;\n    },\n    userID() {\n      return this.news.user_id || 0;\n    },\n    isMine() {\n      return this.news.user_id === this.CURRENTUSER.id;\n    },\n    liked: {\n      get() {\n        return !!this.news.has_like;\n      },\n      set(val) {\n        this.news.has_like = val;\n      }\n    },\n    likeCount: {\n      get() {\n        return this.news.digg_count || 0;\n      },\n      set(val) {\n        val && (this.news.digg_count = val);\n      }\n    },\n    commentCount: {\n      get() {\n        return this.news.comment_count || 0;\n      },\n      set(val) {\n        this.news.comment_count = val;\n      }\n    },\n    time() {\n      return this.news.created_at || \"\";\n    },\n    cate() {\n      const { category: { name = \"未分类\" } = {} } = this.news;\n      return name;\n    },\n    body() {\n      return md(this.news.content || \"\");\n    },\n    isWechat() {\n      return this.$store.state.BROWSER.isWechat;\n    },\n    has_collect: {\n      get() {\n        return this.news.has_collect;\n      },\n      set(val) {\n        this.news.has_collect = val;\n      }\n    }\n  },\n  activated() {\n    if (this.newsID) {\n      if (this.newsID !== this.oldID) {\n        this.fetchNews();\n      } else {\n        setTimeout(() => {\n          this.loading = false;\n        }, 600);\n      }\n    }\n  },\n  deactivated() {\n    this.loading = true;\n  },\n  methods: {\n    shareSuccess() {\n      this.$Message.success(\"分享成功\");\n    },\n    shareCancel() {\n      this.$Message.success(\"取消分享\");\n    },\n    fetchNews(callback = noop) {\n      if (this.fetching) return;\n      this.fetching = true;\n      api\n        .getNewsById(this.newsID)\n        .then(({ data = {} }) => {\n          this.loading = false;\n          this.fetching = false;\n          this.news = data;\n          this.oldID = this.newsID;\n          this.share.title = data.title;\n          this.share.desc = data.subject;\n          this.fetchNewsComments();\n          this.fetchNewsLikes();\n          this.fetchRewardInfo();\n          this.fetchRewards();\n          callback();\n          if (this.isWechat) {\n            const shareUrl =\n              window.location.origin +\n              process.env.BASE_URL.substr(0, process.env.BASE_URL.length - 1) +\n              this.$route.fullPath;\n            const signUrl =\n              this.$store.state.BROWSER.OS === \"IOS\"\n                ? window.initUrl\n                : shareUrl;\n            wechatShare(signUrl, {\n              title: data.title,\n              desc: data.subject,\n              link: shareUrl,\n              imgUrl: this.firstImage\n            });\n          }\n        })\n        .catch(() => {\n          this.$router.back();\n        });\n    },\n    fetchNewsLikes() {\n      // GET /news/{news}/likes\n      this.$http.get(`/news/${this.newsID}/likes`).then(({ data = [] }) => {\n        data && data.length, (this.likes = data);\n      });\n    },\n    fetchNewsComments(after = 0) {\n      if (this.fetchComing) return;\n      this.fetchComing = true;\n\n      api\n        .getNewsComments(this.newsID, { after })\n        .then(({ data: { pinneds = [], comments = [] } }) => {\n          if (!after) {\n            this.pinnedCom = pinneds;\n            // 过滤第一页中的置顶评论\n            const pinnedIds = pinneds.map(p => p.id);\n            this.comments = comments.filter(c => pinnedIds.indexOf(c.id) < 0);\n          } else {\n            this.comments = [...this.comments, ...comments];\n          }\n\n          if (comments.length) {\n            this.maxComId = comments[comments.length - 1].id;\n          }\n\n          this.noMoreCom = comments.lenght !== limit;\n          this.fetchComing = false;\n        })\n        .catch(() => {\n          this.fetchComing = false;\n        });\n    },\n    fetchRewards() {\n      api.getNewsRewards(this.newsID, { limit: 10 }).then(({ data = {} }) => {\n        this.rewardList = data;\n      });\n    },\n    fetchRewardInfo() {\n      api.getRewardInfo(this.newsID).then(({ data = {} }) => {\n        this.reward = {\n          count: ~~data.count || 0,\n          amount: ~~data.amount || 0\n        };\n      });\n    },\n    rewardNews() {\n      const callback = amount => {\n        this.fetchRewards();\n        this.reward.count += 1;\n        this.reward.amount += amount;\n      };\n      this.$bus.$emit(\"reward\", {\n        type: \"news\",\n        api: api.rewardNews,\n        payload: this.newsID,\n        callback\n      });\n    },\n    likeNews() {\n      // DELETE /news/{news}/likes\n      const method = this.liked ? \"delete\" : \"post\";\n      if (this.fetching) return;\n      this.fetching = true;\n      this.$http({\n        method,\n        url: `/news/${this.newsID}/likes`,\n        validateStatus: s => s === 201 || s === 204\n      })\n        .then(() => {\n          method === \"post\"\n            ? ((this.liked = true), (this.likeCount += 1))\n            : ((this.liked = false), (this.likeCount -= 1));\n          this.fetching = false;\n        })\n        .catch(() => {\n          this.fetching = false;\n        });\n    },\n    commentNews() {\n      this.$bus.$emit(\"commentInput\", {\n        onOk: text => {\n          this.sendComment({ body: text });\n        }\n      });\n    },\n    shareNews() {\n      if (this.isWechat) this.$Message.success(\"请点击右上角微信分享😳\");\n      else this.$Message.success(\"请使用浏览器的分享功能😳\");\n    },\n    moreAction() {\n      const defaultActions = [];\n      if (this.has_collect) {\n        defaultActions.push({\n          text: \"取消收藏\",\n          method: () => {\n            api.uncollectNews(this.newsID).then(() => {\n              this.$Message.success(\"取消成功\");\n              this.has_collect = false;\n            });\n          }\n        });\n      } else {\n        defaultActions.push({\n          text: \"收藏\",\n          method: () => {\n            api.collectionNews(this.newsID).then(() => {\n              this.$Message.success(\"收藏成功\");\n              this.has_collect = true;\n            });\n          }\n        });\n      }\n\n      const actions = this.isMine\n        ? [\n            {\n              text: \"申请文章置顶\",\n              method: () => {\n                this.$bus.$emit(\"applyTop\", {\n                  type: \"news\",\n                  api: api.applyTopNews,\n                  payload: this.newsID\n                });\n              }\n            },\n            {\n              text: \"删除\",\n              method: () => {\n                this.$Message.info(\"资讯删除功能开发中，敬请期待\");\n              }\n            }\n          ]\n        : [\n            {\n              text: \"举报\",\n              method: () => {\n                this.$Message.info(\"举报功能开发中，敬请期待\");\n              }\n            }\n          ];\n      this.$bus.$emit(\"actionSheet\", [...defaultActions, ...actions], \"取消\");\n    },\n    replyComment(uid, uname, commentId) {\n      // 是否是自己的评论\n      if (uid === this.CURRENTUSER.id) {\n        // 是否是自己文章的评论\n        const isOwner = uid === this.userID;\n        const actionSheet = [\n          {\n            text: isOwner ? \"评论置顶\" : \"申请评论置顶\",\n            method: () => {\n              this.$bus.$emit(\"applyTop\", {\n                isOwner,\n                type: \"newsComment\",\n                api: api.applyTopNewsComment,\n                payload: { newsId: this.newsID, commentId },\n                callback: this.fetchNewsComments\n              });\n            }\n          },\n          { text: \"删除评论\", method: () => this.deleteComment(commentId) }\n        ];\n        this.$bus.$emit(\"actionSheet\", actionSheet, \"取消\");\n      } else {\n        this.$bus.$emit(\"commentInput\", {\n          placeholder: `回复： ${uname}`,\n          onOk: text => {\n            this.sendComment({ reply_user: uid, body: text });\n          }\n        });\n      }\n    },\n    sendComment({ reply_user: replyUser, body }) {\n      const params = {};\n      if (body && body.length > 0) {\n        params.body = body;\n        replyUser && (params[\"reply_user\"] = replyUser);\n        this.$http\n          .post(`/news/${this.newsID}/comments`, params, {\n            validateStatus: s => s === 201\n          })\n          .then(() => {\n            this.$Message.success(\"评论成功\");\n            this.fetchNewsComments();\n            this.commentCount += 1;\n            this.$bus.$emit(\"commentInput:close\", true);\n          })\n          .catch(() => {\n            this.$Message.error(\"评论失败\");\n            this.$bus.$emit(\"commentInput:close\", true);\n          });\n      } else {\n        this.$Message.error(\"评论内容不能为空\");\n      }\n    },\n    deleteComment(commentId) {\n      api.deleteNewsComment(this.newsID, commentId).then(() => {\n        this.fetchNewsComments();\n        this.commentCount -= 1;\n        this.$Message.success(\"删除评论成功\");\n      });\n    },\n    onRefresh() {\n      this.fetchNews(() => {\n        this.$refs.loadmore.afterRefresh(true);\n      });\n    },\n    getAvatar(avatar) {\n      avatar = avatar || {};\n      return avatar.url || null;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.m-art-head {\n  padding-top: 36px;\n\n  > h1 {\n    margin-top: 0;\n  }\n}\n\n.m-main {\n  padding-bottom: 36px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewsDetail.vue?vue&type=template&id=693cc383&scoped=true&\"\nimport script from \"./NewsDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./NewsDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewsDetail.vue?vue&type=style&index=0&id=693cc383&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"693cc383\",\n  null\n  \n)\n\ncomponent.options.__file = \"NewsDetail.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsSearch.vue?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsSearch.vue?vue&type=style&index=1&lang=less&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsFilter.vue?vue&type=style&index=0&id=69daf673&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsFilter.vue?vue&type=style&index=0&id=69daf673&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsDetail.vue?vue&type=style&index=0&id=693cc383&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsDetail.vue?vue&type=style&index=0&id=693cc383&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsSearch.vue?vue&type=style&index=0&id=701ebe3a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewsSearch.vue?vue&type=style&index=0&id=701ebe3a&lang=less&scoped=true&\""],"sourceRoot":""}